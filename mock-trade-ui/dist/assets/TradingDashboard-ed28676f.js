import{r as i,j as e,R as Xe}from"./index-38e3aaf4.js";const ie="",L="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif";function He({onSelectOrder:o}){const[b,n]=i.useState(""),[d,c]=i.useState("BUY"),[y,f]=i.useState(""),[a,h]=i.useState(""),[S,p]=i.useState("LIMIT"),[z,_]=i.useState("DAY"),[m,F]=i.useState(""),[N,E]=i.useState(""),[u,R]=i.useState(""),[v,A]=i.useState("error"),[l,r]=i.useState([]),[j,M]=i.useState(null),[w,T]=i.useState(!1),[D,P]=i.useState(!1),[U,V]=i.useState(!1),[re,Z]=i.useState(""),[oe,ne]=i.useState(""),[se,ee]=i.useState(""),[G,x]=i.useState(""),[C,k]=i.useState(""),[W,H]=i.useState(!1),[Q,de]=i.useState(!1),[s,g]=i.useState(""),[O,Y]=i.useState(""),[le,ce]=i.useState(!1),[me,fe]=i.useState([]),[ye,he]=i.useState([]),[je,ge]=i.useState([]),Ae=["MARKET","LIMIT","STOP","STOP_LIMIT","IOC","FOK"],we=["DAY","GTC","IOC","FOK","GTD"],ze=["Test Mode","Circuit Breaker","Manual Rejection"],Me=["TWAP","VWAP","POV"],[Se,Fe]=i.useState(""),[_e,De]=i.useState(""),[ve,Oe]=i.useState("All"),Ie=async()=>{try{const t=await fetch(`${ie}/api/v1/static-data/instruments`);if(!t.ok)throw new Error(`Failed to fetch instruments: HTTP ${t.status}`);const I=await t.json();fe(Array.isArray(I)?I:[])}catch(t){console.error("Error fetching instruments:",t),fe([]),R("Warning: Could not load instruments from Static Data. Please set up instruments first."),A("warning")}},pe=async()=>{T(!0);try{const t=await fetch(`${ie}/order/`);if(!t.ok)throw new Error(`HTTP ${t.status}`);const I=await t.json();r(Array.isArray(I)?I:[])}catch(t){console.error("Error fetching orders:",t)}finally{T(!1)}},We=async()=>{try{const t=await fetch(`${ie}/api/v1/static-data/traders`);if(!t.ok)throw new Error(`Failed to fetch traders: HTTP ${t.status}`);const I=await t.json();he(Array.isArray(I)?I:[])}catch(t){console.error("Error fetching traders:",t),he([])}},Be=async()=>{try{const t=await fetch(`${ie}/api/v1/static-data/accounts`);if(!t.ok)throw new Error(`Failed to fetch accounts: HTTP ${t.status}`);const I=await t.json();ge(Array.isArray(I)?I:[])}catch(t){console.error("Error fetching accounts:",t),ge([])}};i.useEffect(()=>{Ie(),We(),Be(),pe()},[]);const Ee=()=>{n(""),c("BUY"),f(""),h(""),p("LIMIT"),_("DAY"),F(""),E(""),R(""),M(null),P(!1),V(!1),Z(""),ne(""),ee(""),x(""),k(""),H(!1),de(!1),g(""),Y(""),ce(!1)},Le=()=>{if(!b)return"Instrument is required";if(!d)return"Side is required";if(!y||Number(y)<=0)return"Order Qty must be a positive number";if(!S)return"Order Type is required";if(!N)return"Account is required";const t=S;return(t==="LIMIT"||t==="STOP_LIMIT")&&(a===""||a===null)?"Price is required for Limit/Stop-Limit orders":(t==="STOP"||t==="STOP_LIMIT")&&(C===""||C===null)?"Stop Price is required for Stop/Stop-Limit orders":U&&!re?"Reject Reason required when Reject Order is checked":null},Ne=async t=>{t.preventDefault(),R("");const I=Le();if(I){R(I),A("error");return}const te={instrument:b,side:d,orderQty:Number(y),orderType:S,price:a===""?null:Number(a),stopPrice:C===""?null:Number(C),account:N,tif:z,trader:m,clientOrderId:O||void 0,rejectOrder:!!U,rejectReason:U&&re||void 0,participationPercentage:oe?Number(oe):void 0,displayQty:se?Number(se):void 0,icebergSize:G?Number(G):void 0,selfHedge:!!W,algoEnabled:!!Q,strategy:Q&&s||void 0,cancelOnDisconnect:!!le};try{const B=await fetch(`${ie}/order/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});if(!B.ok){let xe=`HTTP ${B.status}`;try{const be=await B.text();try{const Te=JSON.parse(be);xe=Te.detail||Te.message||be}catch{xe=be||xe}}catch{xe=`HTTP ${B.status}: ${B.statusText}`}throw new Error(xe)}const nt=await B.json();R("Order created successfully"),A("success"),await pe(),Ee(),setTimeout(()=>R(""),3e3)}catch(B){B.message.includes("Failed to fetch")?R("Error: Cannot reach API server at backend API. Is it running?"):R(`Error: ${B.message}`),A("error")}},Pe=async t=>{try{if(!(await fetch(`${ie}/order/${t}/simulate_fill`,{method:"POST"})).ok)throw new Error("Failed to fill");R("Order filled"),A("success"),pe(),setTimeout(()=>R(""),3e3)}catch(I){R(`Error: ${I.message}`),A("error")}},Ue=async t=>{try{if(!(await fetch(`${ie}/order/${t}/cancel`,{method:"POST"})).ok)throw new Error("Failed to cancel");R("Order cancelled"),A("success"),pe(),setTimeout(()=>R(""),3e3)}catch(I){R(`Error: ${I.message}`),A("error")}},Ce=l.filter(t=>{var I,te;return!(Se&&!((I=t.instrument)!=null&&I.toLowerCase().includes(Se.toLowerCase()))||_e&&!((te=t.trader)!=null&&te.toLowerCase().includes(_e.toLowerCase()))||ve!=="All"&&t.status!==ve)}),$e=t=>{switch(t){case"NEW":return{bg:"#fef3c7",text:"#78350f",border:"#fde68a"};case"FILLED":return{bg:"#d1fae5",text:"#065f46",border:"#a7f3d0"};case"CANCELLED":return{bg:"#fee2e2",text:"#7f1d1d",border:"#fecaca"};default:return{bg:"#f3f4f6",text:"#374151",border:"#e5e7eb"}}};return e.jsxs("div",{style:{maxWidth:"1400px",fontFamily:L},children:[e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"6px",padding:"20px",marginBottom:"20px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:"1px solid #e5e7eb"},children:[e.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"15px",fontWeight:"700",color:"#1f2933",paddingBottom:"12px",borderBottom:"1px solid #e5e7eb"},children:"Create Order"}),u&&e.jsxs("div",{style:{padding:"10px 12px",marginBottom:"16px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",backgroundColor:v==="success"?"#d1fae5":"#fee2e2",color:v==="success"?"#065f46":"#7f1d1d",border:`1px solid ${v==="success"?"#a7f3d0":"#fecaca"}`,display:"flex",alignItems:"center",gap:"8px"},children:[v==="success"?"✓":"✕"," ",u]}),e.jsxs("form",{onSubmit:Ne,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Instrument *"}),e.jsxs("select",{value:b,onChange:t=>n(t.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",backgroundColor:"#fff",boxSizing:"border-box",fontFamily:L},children:[e.jsx("option",{value:"",children:"Select instrument..."}),me.map(t=>e.jsx("option",{value:t.instrument_id,children:t.symbol},t.instrument_id)),e.jsx("option",{value:"OTHER",children:"Other (enter below)"})]}),b==="OTHER"&&e.jsx("input",{type:"text",placeholder:"Enter instrument symbol",onChange:t=>n(t.target.value),style:{marginTop:8,width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:4}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Side *"}),e.jsxs("select",{value:d,onChange:t=>c(t.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontFamily:L},children:[e.jsx("option",{value:"BUY",children:"Buy"}),e.jsx("option",{value:"SELL",children:"Sell"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Order Qty *"}),e.jsx("input",{type:"number",value:y,onChange:t=>f(t.target.value),placeholder:"100",style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",backgroundColor:"#fff",boxSizing:"border-box",fontFamily:L}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Order Type *"}),e.jsx("select",{value:S,onChange:t=>p(t.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontFamily:L},children:Ae.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Order Px"}),e.jsx("input",{type:"number",step:"0.01",value:a,onChange:t=>h(t.target.value),placeholder:"4000.50",disabled:S==="MARKET",style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",backgroundColor:S==="MARKET"?"#f3f4f6":"#fff",boxSizing:"border-box",opacity:S==="MARKET"?.6:1,transition:"border-color 0.15s",fontFamily:L}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Stop Price"}),e.jsx("input",{type:"number",step:"0.01",value:C,onChange:t=>k(t.target.value),placeholder:"3990.00",disabled:!(S==="STOP"||S==="STOP_LIMIT"),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",backgroundColor:S==="STOP"||S==="STOP_LIMIT"?"#fff":"#f3f4f6",boxSizing:"border-box",opacity:S==="STOP"||S==="STOP_LIMIT"?1:.6,transition:"border-color 0.15s",fontFamily:L}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"TIF *"}),e.jsx("select",{value:z,onChange:t=>_(t.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontFamily:L},children:we.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Trader *"}),e.jsxs("select",{value:m,onChange:t=>F(t.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",backgroundColor:"#fff",boxSizing:"border-box",fontFamily:L},children:[e.jsx("option",{value:"",children:"Select trader..."}),ye.map(t=>e.jsx("option",{value:t.trader_id,children:t.user_id},t.trader_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Account *"}),e.jsxs("select",{value:N,onChange:t=>E(t.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontFamily:L},children:[e.jsx("option",{value:"",children:"Select account..."}),je.map(t=>e.jsx("option",{value:t.account_id,children:t.code},t.account_id))]})]})]}),e.jsxs("div",{style:{marginTop:12,marginBottom:12},children:[e.jsx("button",{type:"button",onClick:()=>P(!D),style:{padding:"8px 12px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:6,cursor:"pointer",fontWeight:600},children:D?"Hide advanced parameters":"Show advanced parameters"}),D&&e.jsx("div",{style:{marginTop:12,padding:12,border:"1px solid #e5e7eb",borderRadius:6,background:"#fff"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("label",{style:{fontSize:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:U,onChange:t=>V(t.target.checked)}),"Reject Order"]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:11,color:"#4b5563",marginBottom:4},children:"Reject Reason"}),e.jsxs("select",{value:re,onChange:t=>Z(t.target.value),disabled:!U,style:{width:"100%",padding:"8px",borderRadius:4},children:[e.jsx("option",{value:"",children:"Select reason..."}),ze.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:11,color:"#4b5563",marginBottom:4},children:"Participation %"}),e.jsx("input",{type:"number",step:"0.1",value:oe,onChange:t=>ne(t.target.value),style:{width:"100%",padding:"8px",borderRadius:4}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:11,color:"#4b5563",marginBottom:4},children:"Display Qty (Iceberg visible)"}),e.jsx("input",{type:"number",value:se,onChange:t=>ee(t.target.value),style:{width:"100%",padding:"8px",borderRadius:4}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:11,color:"#4b5563",marginBottom:4},children:"Iceberg Display Size"}),e.jsx("input",{type:"number",value:G,onChange:t=>x(t.target.value),style:{width:"100%",padding:"8px",borderRadius:4}})]}),e.jsxs("label",{style:{fontSize:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:W,onChange:t=>H(t.target.checked)}),"Self-Hedge"]}),e.jsxs("label",{style:{fontSize:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:Q,onChange:t=>de(t.target.checked)}),"Algo / Strategy Enabled"]}),Q&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:11,color:"#4b5563",marginBottom:4},children:"Strategy"}),e.jsxs("select",{value:s,onChange:t=>g(t.target.value),style:{width:"100%",padding:"8px",borderRadius:4},children:[e.jsx("option",{value:"",children:"Select strategy..."}),Me.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:11,color:"#4b5563",marginBottom:4},children:"Client Order ID"}),e.jsx("input",{type:"text",value:O,onChange:t=>Y(t.target.value),style:{width:"100%",padding:"8px",borderRadius:4}})]}),e.jsxs("label",{style:{fontSize:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("input",{type:"checkbox",checked:le,onChange:t=>ce(t.target.checked)}),"Cancel on Disconnect"]})]})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",paddingTop:"12px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("button",{type:"submit",style:{padding:"8px 16px",backgroundColor:"#1d4ed8",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",fontSize:"12px",cursor:"pointer",transition:"all 0.15s",fontFamily:L},onMouseEnter:t=>t.target.style.backgroundColor="#1e40af",onMouseLeave:t=>t.target.style.backgroundColor="#1d4ed8",children:"Create"}),e.jsx("button",{type:"button",onClick:Ee,style:{padding:"8px 16px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",fontWeight:"600",fontSize:"12px",cursor:"pointer",transition:"all 0.15s",fontFamily:L},onMouseEnter:t=>t.target.style.backgroundColor="#e5e7eb",onMouseLeave:t=>t.target.style.backgroundColor="#f3f4f6",children:"Clear"})]})]})]}),e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"6px",overflow:"hidden",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#f9fafb"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"13px",fontWeight:"700",color:"#1f2933"},children:["Orders (",Ce.length,")"]}),e.jsx("button",{onClick:pe,style:{padding:"6px 12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s",fontFamily:L},onMouseEnter:t=>t.target.style.backgroundColor="#e5e7eb",onMouseLeave:t=>t.target.style.backgroundColor="#f3f4f6",children:"Refresh"})]}),e.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#f9fafb",display:"flex",gap:"8px",alignItems:"center",borderBottom:"1px solid #e5e7eb",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",placeholder:"Instr",value:Se,onChange:t=>Fe(t.target.value),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"3px",fontSize:"11px",backgroundColor:"#fff",boxSizing:"border-box",minWidth:"80px",fontFamily:L}}),e.jsx("input",{type:"text",placeholder:"Trader",value:_e,onChange:t=>De(t.target.value),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"3px",fontSize:"11px",backgroundColor:"#fff",boxSizing:"border-box",minWidth:"80px",fontFamily:L}}),e.jsxs("select",{value:ve,onChange:t=>Oe(t.target.value),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"3px",fontSize:"11px",backgroundColor:"#fff",boxSizing:"border-box",minWidth:"70px",fontFamily:L},children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"NEW"}),e.jsx("option",{children:"FILLED"}),e.jsx("option",{children:"CANCELLED"})]})]}),w?e.jsx("div",{style:{padding:"30px",textAlign:"center",color:"#9ca3af",fontSize:"12px",fontFamily:L},children:"Loading..."}):Ce.length===0?e.jsx("div",{style:{padding:"30px",textAlign:"center",color:"#9ca3af",fontSize:"12px",fontFamily:L},children:"No orders yet"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",fontFamily:L},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"INSTR"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"SIDE"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"QTY"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"PRICE"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"TRADER"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"CREATED"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"ACTIONS"})]})}),e.jsx("tbody",{children:Ce.map((t,I)=>{const te=$e(t.status);return e.jsxs("tr",{onClick:()=>{M(t.id),o&&o(t.id,t)},style:{backgroundColor:I%2===0?"#fff":"#f9fafb",borderBottom:"1px solid #e5e7eb",height:"40px",cursor:"pointer",transition:"background-color 0.15s",borderLeft:j===t.id?"3px solid #1d4ed8":"3px solid transparent"},onMouseEnter:B=>{j!==t.id&&(B.currentTarget.style.backgroundColor="#f0f9ff")},onMouseLeave:B=>{B.currentTarget.style.backgroundColor=I%2===0?"#fff":"#f9fafb"},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600",fontSize:"11px"},children:t.instrument}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",color:t.side==="BUY"?"#10b981":"#ef4444",fontWeight:"600",fontSize:"11px"},children:t.side}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#4b5563",fontSize:"11px"},children:t.qty}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#4b5563",fontSize:"11px"},children:t.price}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563",fontSize:"11px"},children:t.trader}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-block",padding:"3px 8px",borderRadius:"3px",fontSize:"10px",fontWeight:"700",backgroundColor:te.bg,color:te.text,border:`1px solid ${te.border}`},children:t.status})}),e.jsx("td",{style:{padding:"8px 12px",color:"#9ca3af",fontSize:"10px"},children:t.created_at?new Date(t.created_at).toLocaleDateString():"—"}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsx("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:t.status==="NEW"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Pe(t.id),style:{padding:"3px 6px",backgroundColor:"transparent",color:"#10b981",border:"none",borderRadius:"2px",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s",fontFamily:L},onMouseEnter:B=>B.target.style.backgroundColor="#d1fae5",onMouseLeave:B=>B.target.style.backgroundColor="transparent",children:"Fill"}),e.jsx("button",{onClick:()=>Ue(t.id),style:{padding:"3px 6px",backgroundColor:"transparent",color:"#ef4444",border:"none",borderRadius:"2px",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s",fontFamily:L},onMouseEnter:B=>B.target.style.backgroundColor="#fee2e2",onMouseLeave:B=>B.target.style.backgroundColor="transparent",children:"Cancel"})]})})})]},I)})})]})})]})]})}const ae="",X="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif";function Ye(){const[o,b]=i.useState("instruments"),[n,d]=i.useState(null),[c,y]=i.useState([]),[f,a]=i.useState([]),[h,S]=i.useState([]),[p,z]=i.useState([]),[_,m]=i.useState([]),[F,N]=i.useState(!1),[E,u]=i.useState(""),[R,v]=i.useState(!1),[A,l]=i.useState({}),[r,j]=i.useState(null),[M,w]=i.useState({}),[T,D]=i.useState(!1);i.useEffect(()=>{U()},[o]);const P=x=>Array.isArray(x)?x:x&&Array.isArray(x.items)?x.items:[],U=async()=>{N(!0);try{const x=o,C=await fetch(`${ae}/api/v1/static-data/${x}`);if(!C.ok){const H=await C.text();throw new Error(`HTTP ${C.status}: ${H||C.statusText}`)}const k=await C.json(),W=P(k);x==="instruments"?y(W):x==="accounts"?a(W):x==="traders"?S(W):x==="brokers"?z(W):x==="clearers"&&m(W)}catch(x){console.error("StaticData fetch error",x),u(`Error loading ${o}: ${x.message}`)}N(!1)},V=async x=>{x.preventDefault();try{let C={...A};if(o==="instruments"&&C.metadata)try{const k=typeof C.metadata=="string"?JSON.parse(C.metadata):C.metadata;C.metadata=k}catch(k){u(`Error: metadata JSON invalid - ${k.message}`);return}try{const k=await fetch(`${ae}/api/v1/static-data/${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(!k.ok){let W="Failed to create";try{const H=await k.json();W=H.detail||H.message||JSON.stringify(H)}catch{W=`HTTP ${k.status}: ${k.statusText}`}throw new Error(W)}u(`${o.slice(0,-1)} created successfully`),v(!1),l({}),U(),setTimeout(()=>u(""),3e3)}catch(k){console.error("Fetch error:",k),k.message.includes("Failed to fetch")?u(`Error: Cannot reach API server at ${ae}. Is the backend running?`):u(`Error: ${k.message}`)}}catch(C){u(`Error: ${C.message}`)}},re=async x=>{if(x.preventDefault(),!r){u("Error: No instrument selected");return}try{const C=await fetch(`${ae}/api/v1/static-data/instruments/${r.instrument_id}/otc`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!C.ok){let k="Failed to save OTC details";try{const W=await C.json();k=W.detail||W.message||JSON.stringify(W)}catch{k=`HTTP ${C.status}: ${C.statusText}`}throw new Error(k)}u("OTC details saved successfully"),D(!1),w({}),setTimeout(()=>u(""),3e3)}catch(C){u(`Error: ${C.message}`)}},Z=async x=>{x[o==="instruments"?"instrument_id":o==="accounts"?"account_id":o==="traders"?"trader_id":o==="brokers"?"broker_id":"clearer_id"],l(x),v(!0)},oe=async x=>{if(window.confirm(`Are you sure you want to delete this ${o.slice(0,-1)}?`))try{const k=x[o==="instruments"?"instrument_id":o==="accounts"?"account_id":o==="traders"?"trader_id":o==="brokers"?"broker_id":"clearer_id"],W=await fetch(`${ae}/api/v1/static-data/${o}/${k}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!W.ok){let H="Failed to delete";try{const Q=await W.json();H=Q.detail||Q.message||JSON.stringify(Q)}catch{H=`HTTP ${W.status}: ${W.statusText}`}throw new Error(H)}u(`${o.slice(0,-1)} deleted successfully`),U(),setTimeout(()=>u(""),3e3)}catch(C){C.message.includes("Failed to fetch")?u(`Error: Cannot reach API server at ${ae}. Is the backend running?`):u(`Error: ${C.message}`)}},ne={instruments:[{label:"Symbol",key:"symbol",type:"text",required:!0,placeholder:"ES, NQ, AAPL"},{label:"Name",key:"name",type:"text",required:!0,placeholder:"E-mini S&P 500"},{label:"Asset Class",key:"asset_class",type:"text",required:!1,placeholder:"FX, EQUITY, FUTURE, OTC"},{label:"Instrument Type",key:"instrument_type",type:"text",required:!1,placeholder:"OTC_FX_FWD, FX_FUT, STRATEGY"},{label:"Status",key:"status",type:"text",required:!1,placeholder:"ACTIVE"},{label:"Metadata (JSON, optional)",key:"metadata",type:"json",required:!1}],accounts:[{label:"Code",key:"code",type:"text",required:!0},{label:"Name",key:"name",type:"text",required:!0}],traders:[{label:"User ID",key:"user_id",type:"text",required:!0},{label:"Name",key:"name",type:"text",required:!0},{label:"Desk",key:"desk",type:"text",required:!0}],brokers:[{label:"Code",key:"code",type:"text",required:!0},{label:"Name",key:"name",type:"text",required:!0}],clearers:[{label:"Code",key:"code",type:"text",required:!0},{label:"Name",key:"name",type:"text",required:!0},{label:"LEID",key:"leid",type:"text",required:!0,placeholder:"Legal Entity Identifier"}]},se=[{label:"Settlement Type",key:"settlement_type",type:"text",placeholder:"PHYSICAL, CASH"},{label:"Settlement Day Offset",key:"settlement_day_offset",type:"number",placeholder:"T+N (e.g., 2)"},{label:"Day Count Convention",key:"day_count_convention",type:"text",placeholder:"ACT/365, 30/360"},{label:"Payment Frequency",key:"payment_frequency",type:"text",placeholder:"QUARTERLY, SEMI-ANNUAL"},{label:"Primary Calendar",key:"primary_calendar",type:"text",placeholder:"US, EUR, GBP"},{label:"Secondary Calendar",key:"secondary_calendar",type:"text",placeholder:"Optional"},{label:"Is Cleared (Y/N)",key:"is_cleared",type:"text",placeholder:"Y or N"},{label:"Clearing House",key:"clearing_house",type:"text",placeholder:"LCH, CME Clearing"},{label:"Clearing Code",key:"clearing_code",type:"text",placeholder:"Optional"},{label:"Bilateral Counterparty",key:"bilateral_cpty",type:"text",placeholder:"Optional"}],ee={instruments:{title:"Instruments",data:Array.isArray(c)?c:[],columns:["instrument_id","symbol","name","asset_class","instrument_type","status"]},accounts:{title:"Accounts",data:Array.isArray(f)?f:[],columns:["account_id","code","name","status"]},traders:{title:"Traders",data:Array.isArray(h)?h:[],columns:["trader_id","user_id","name","desk"]},brokers:{title:"Brokers",data:Array.isArray(p)?p:[],columns:["broker_id","code","name","status"]},clearers:{title:"Clearers",data:Array.isArray(_)?_:[],columns:["clearer_id","code","name","leid","status"]}},G=ee[o];return e.jsxs("div",{style:{fontFamily:X},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h2",{style:{margin:0,fontSize:"15px",fontWeight:"700",color:"#1f2933",paddingBottom:"12px",borderBottom:"1px solid #e5e7eb"},children:"Static Data"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#4b5563"},children:"Manage instruments, accounts, traders, brokers, and clearers"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px",marginBottom:"20px"},children:Object.keys(ee).map(x=>e.jsx("button",{onClick:()=>b(x),style:{padding:"8px 12px",backgroundColor:o===x?"#f0f9ff":"#f3f4f6",color:o===x?"#1d4ed8":"#6b7280",border:o===x?"1px solid #bfdbfe":"1px solid #d1d5db",borderRadius:"4px",cursor:"pointer",fontWeight:o===x?"600":"500",fontSize:"12px",transition:"all 0.15s",fontFamily:X},children:ee[x].title},x))}),E&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"16px",backgroundColor:E.includes("Error")?"#fee2e2":"#d1fae5",color:E.includes("Error")?"#7f1d1d":"#065f46",borderRadius:"4px",border:`1px solid ${E.includes("Error")?"#fecaca":"#a7f3d0"}`,fontSize:"12px"},children:E}),e.jsxs("div",{children:[o==="instruments"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginBottom:"20px",padding:"12px",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"4px"},children:[e.jsx("button",{onClick:()=>d(n==="otc"?null:"otc"),style:{padding:"8px 12px",backgroundColor:n==="otc"?"#dbeafe":"#f3f4f6",color:n==="otc"?"#0c4a6e":"#6b7280",border:n==="otc"?"1px solid #7dd3fc":"1px solid #d1d5db",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:X},children:"OTC Details"}),e.jsx("button",{onClick:()=>d(n==="etd"?null:"etd"),style:{padding:"8px 12px",backgroundColor:n==="etd"?"#dcfce7":"#f3f4f6",color:n==="etd"?"#166534":"#6b7280",border:n==="etd"?"1px solid #86efac":"1px solid #d1d5db",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:X},children:"ETD Details"}),e.jsx("button",{onClick:()=>d(n==="strategy"?null:"strategy"),style:{padding:"8px 12px",backgroundColor:n==="strategy"?"#fce7f3":"#f3f4f6",color:n==="strategy"?"#831843":"#6b7280",border:n==="strategy"?"1px solid #fbcfe8":"1px solid #d1d5db",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:X},children:"Strategy Details"})]}),n&&e.jsxs("div",{style:{padding:"12px",backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"4px",marginBottom:"20px",fontSize:"12px",color:"#166534"},children:["ℹ️ First create an instrument above, then select it here to add ",n.toUpperCase()," details."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"200px 1fr",gap:"20px"},children:[e.jsxs("div",{children:[!R&&e.jsx("button",{onClick:()=>v(!0),style:{width:"100%",padding:"8px 12px",backgroundColor:"#1d4ed8",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",marginBottom:"16px",fontFamily:X},children:"New Entry"}),R&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("form",{onSubmit:V,style:{display:"grid",gap:"12px"},children:[ne[o].map(x=>e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:[x.label," ",x.required&&e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),x.type==="json"?e.jsx("textarea",{value:A[x.key]||"",onChange:C=>l({...A,[x.key]:C.target.value}),placeholder:'{"key": "value"}',style:{width:"100%",padding:"8px 10px",backgroundColor:"#f9fafb",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:X,minHeight:80,lineHeight:"1.4"}}):e.jsx("input",{type:x.type,value:A[x.key]||"",onChange:C=>l({...A,[x.key]:C.target.value}),placeholder:x.placeholder||"",required:x.required,style:{width:"100%",padding:"8px 10px",backgroundColor:"#f9fafb",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:X}})]},x.key)),e.jsxs("button",{type:"submit",style:{padding:"10px 12px",backgroundColor:"#1d4ed8",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:X,marginTop:"8px"},children:["Create ",o.slice(0,-1)]})]}),e.jsx("button",{onClick:()=>v(!1),style:{width:"100%",padding:"8px 12px",marginTop:"8px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:X},children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:"0 0 12px 0",fontSize:"13px",fontWeight:"700",color:"#1f2933"},children:[G.title," (",G.data.length,")"]}),F?e.jsx("p",{style:{color:"#9ca3af",fontSize:"12px"},children:"Loading..."}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",fontFamily:X},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[G.columns.map(x=>e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",color:"#4b5563",fontWeight:"700",fontSize:"10px",textTransform:"uppercase",letterSpacing:"0.3px"},children:x},x)),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#4b5563",fontWeight:"700",fontSize:"10px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Actions"})]})}),e.jsx("tbody",{children:G.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:G.columns.length+1,style:{padding:"16px 12px",textAlign:"center",color:"#9ca3af",fontSize:"12px"},children:"No data"})}):G.data.map((x,C)=>e.jsxs("tr",{onClick:()=>o==="instruments"&&j(x),style:{borderBottom:"1px solid #e5e7eb",backgroundColor:(r==null?void 0:r.instrument_id)===x.instrument_id?"#dbeafe":C%2===0?"#fff":"#f9fafb",cursor:o==="instruments"?"pointer":"default",transition:"background-color 0.1s"},children:[G.columns.map(k=>e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563",fontSize:"11px"},children:String(x[k]||"-").substring(0,30)},k)),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",fontSize:"11px"},onClick:k=>k.stopPropagation(),children:e.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>Z(x),style:{padding:"4px 8px",backgroundColor:"#3b82f6",color:"#fff",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"600",fontSize:"10px",fontFamily:X,transition:"all 0.15s"},onMouseEnter:k=>k.target.style.backgroundColor="#2563eb",onMouseLeave:k=>k.target.style.backgroundColor="#3b82f6",children:"Edit"}),e.jsx("button",{onClick:()=>oe(x),style:{padding:"4px 8px",backgroundColor:"#ef4444",color:"#fff",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"600",fontSize:"10px",fontFamily:X,transition:"all 0.15s"},onMouseEnter:k=>k.target.style.backgroundColor="#dc2626",onMouseLeave:k=>k.target.style.backgroundColor="#ef4444",children:"Delete"})]})})]},C))})]})})]})]}),o==="instruments"&&n&&e.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px"},children:[e.jsxs("h3",{style:{margin:"0 0 12px 0",fontSize:"13px",fontWeight:"700",color:"#1f2933"},children:[n.toUpperCase()," Instrument Details"]}),e.jsxs("div",{style:{padding:"20px",textAlign:"center",backgroundColor:"#f9fafb",borderRadius:"4px",color:"#6b7280",fontSize:"12px"},children:[e.jsxs("p",{style:{margin:"0 0 8px 0",fontWeight:"600"},children:["To add ",n.toUpperCase()," details:"]}),e.jsxs("ol",{style:{margin:"8px 0",textAlign:"left",display:"inline-block",color:"#4b5563"},children:[e.jsx("li",{children:"Select an instrument from the table above"}),e.jsxs("li",{children:["Click the ",n.toUpperCase()," Details button"]}),e.jsx("li",{children:"Fill in the specific fields and save"})]}),e.jsxs("p",{style:{margin:"12px 0 0 0",fontSize:"11px",color:"#9ca3af"},children:["(",n==="otc"&&"OTC: settlement type, calendars, clearing details, etc.",") (",n==="etd"&&"ETD: exchange, contract specs, margin, trading hours, etc.",") (",n==="strategy"&&"Strategy: template, payoff type, rebalance rules, legs, etc.",")"]})]})]}),o==="instruments"&&r&&e.jsxs("div",{style:{marginTop:"24px",paddingTop:"20px",borderTop:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"13px",fontWeight:"700",color:"#1f2933"},children:["Selected: ",r.symbol," - ",r.name]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>D(!T),style:{padding:"6px 12px",backgroundColor:"#1d4ed8",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:X},children:T?"Hide OTC Details":"Add OTC Details"}),e.jsx("button",{onClick:()=>{j(null),D(!1),w({})},style:{padding:"6px 12px",backgroundColor:"#9ca3af",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:X},children:"Clear Selection"})]})]}),T&&e.jsxs("form",{onSubmit:re,style:{padding:"12px",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"4px",marginTop:"12px"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:se.map(x=>e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase"},children:x.label}),e.jsx("input",{type:x.type||"text",placeholder:x.placeholder,value:M[x.key]||"",onChange:C=>w({...M,[x.key]:C.target.value}),style:{width:"100%",padding:"6px 8px",backgroundColor:"#fff",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"11px",boxSizing:"border-box",fontFamily:X}})]},x.key))}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[e.jsx("button",{type:"submit",style:{padding:"6px 12px",backgroundColor:"#10b981",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:X},children:"Save OTC Details"}),e.jsx("button",{type:"button",onClick:()=>{D(!1),w({})},style:{padding:"6px 12px",backgroundColor:"#6b7280",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:X},children:"Cancel"})]})]})]})]})]})}const Re="",ue="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif";function Ke(){const[o,b]=i.useState([]),[n,d]=i.useState(""),[c,y]=i.useState({}),[f,a]=i.useState(""),[h,S]=i.useState(!1);i.useEffect(()=>{p()},[]);const p=async()=>{S(!0);try{const _=await fetch(`${Re}/api/v1/market-data/`);if(_.ok){const m=await _.json();b(m)}}catch{console.log("No market data yet")}S(!1)},z=async _=>{_.preventDefault();try{if(!(await fetch(`${Re}/api/v1/market-data/market-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instrument_id:n,bid_price:parseFloat(c.bid_price),ask_price:parseFloat(c.ask_price),bid_qty:parseFloat(c.bid_qty),ask_qty:parseFloat(c.ask_qty),last_price:parseFloat(c.last_price),volume:parseFloat(c.volume)||0})})).ok)throw new Error("Failed");a("Market data updated"),y({}),d(""),p(),setTimeout(()=>a(""),3e3)}catch(m){a(`Error: ${m.message}`)}};return e.jsxs("div",{style:{fontFamily:ue},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h2",{style:{margin:0,fontSize:"15px",fontWeight:"700",color:"#1f2933",paddingBottom:"12px",borderBottom:"1px solid #e5e7eb"},children:"Market Data"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#4b5563"},children:"Update and monitor market pricing"})]}),f&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"16px",backgroundColor:f.includes("Error")?"#fee2e2":"#d1fae5",color:f.includes("Error")?"#7f1d1d":"#065f46",borderRadius:"4px",border:`1px solid ${f.includes("Error")?"#fecaca":"#a7f3d0"}`,fontSize:"12px"},children:f}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"13px",fontWeight:"700",color:"#1f2933"},children:"Update Data"}),e.jsxs("form",{onSubmit:z,style:{display:"grid",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase"},children:"Instrument"}),e.jsx("input",{type:"text",placeholder:"ES",value:n,onChange:_=>d(_.target.value),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",backgroundColor:"#f9fafb",boxSizing:"border-box",fontFamily:ue},required:!0})]}),[{label:"Bid",key:"bid_price"},{label:"Ask",key:"ask_price"},{label:"Bid Qty",key:"bid_qty"},{label:"Ask Qty",key:"ask_qty"}].map(_=>e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase"},children:_.label}),e.jsx("input",{type:"number",step:"0.01",value:c[_.key]||"",onChange:m=>y({...c,[_.key]:m.target.value}),style:{width:"100%",padding:"8px 10px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",backgroundColor:"#f9fafb",boxSizing:"border-box",fontFamily:ue},required:!0})]},_.key)),e.jsx("button",{type:"submit",style:{padding:"8px 12px",backgroundColor:"#1d4ed8",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:ue},children:"Update"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"13px",fontWeight:"700",color:"#1f2933"},children:"Current Data"}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",fontFamily:ue},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",color:"#4b5563",fontWeight:"700",fontSize:"10px"},children:"INSTR"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",color:"#4b5563",fontWeight:"700",fontSize:"10px"},children:"BID/ASK"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#4b5563",fontWeight:"700",fontSize:"10px"},children:"SPREAD"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",style:{padding:"16px 12px",textAlign:"center",color:"#9ca3af",fontSize:"12px"},children:"No data"})}):o.map((_,m)=>e.jsxs("tr",{style:{backgroundColor:m%2===0?"#fff":"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600"},children:_.instrument_id}),e.jsxs("td",{style:{padding:"8px 12px",color:"#4b5563"},children:[_.bid_price," / ",_.ask_price]}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#4b5563"},children:(_.ask_price-_.bid_price).toFixed(4)})]},m))})]})})]})]})]})}const $="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif";function qe(){const[o,b]=i.useState("portfolio"),[n,d]=i.useState(""),[c,y]=i.useState(!1),[f,a]=i.useState({}),[h,S]=i.useState(""),[p,z]=i.useState([{rule_id:2001,source_system:"MUREX",source_trader_uuid:"a4f7e8c2-1b3d-4f9a-8c5e-6d2a9f1e7b3c",internal_trader_id:"TRD001",email:"james.chen@demo-bank.com",active:!0},{rule_id:2002,source_system:"SUMMIT",source_trader_uuid:"b5e8d9a3-2c4e-5f0b-9d6f-7e3b0a2f8c4d",internal_trader_id:"TRD001",email:"james.chen@demo-bank.com",active:!0},{rule_id:2003,source_system:"BLBG",source_trader_uuid:"c6f9ea4b-3d5f-6a1c-ae7a-8f4c1b3a9d5e",internal_trader_id:"FXDESK02",email:"sarah.williams@demo-bank.com",active:!0},{rule_id:2004,source_system:"MUREX",source_trader_uuid:"d7a0fb5c-4e6a-7b2d-bf8b-9a5d2c4b0e6f",internal_trader_id:"FXDESK02",email:"sarah.williams@demo-bank.com",active:!0},{rule_id:2005,source_system:"SUMMIT",source_trader_uuid:"e8b1ac6d-5f7b-8c3e-ca9c-ab6e3d5c1f7a",internal_trader_id:"RATES01",email:"michael.kumar@demo-bank.com",active:!0},{rule_id:2006,source_system:"BLBG",source_trader_uuid:"f9c2bd7e-6a8c-9d4f-db0d-bc7f4e6d2a8b",internal_trader_id:"EQDESK03",email:"emma.rodriguez@demo-bank.com",active:!0},{rule_id:2007,source_system:"MUREX",source_trader_uuid:"a0d3ce8f-7b9d-0e5a-ec1e-cd8a5f7e3b9c",internal_trader_id:"CMDTY04",email:"david.morrison@demo-bank.com",active:!1},{rule_id:2008,source_system:"SUMMIT",source_trader_uuid:"b1e4df0a-8c0e-1f6b-fd2f-de9b6a8f4c0d",internal_trader_id:"RATES01",email:"michael.kumar@demo-bank.com",active:!0},{rule_id:2009,source_system:"BLBG",source_trader_uuid:"c2f5e01b-9d1f-2a7c-ae3a-ef0c7b9a5d1e",internal_trader_id:"VOLDESK05",email:"alice.thompson@demo-bank.com",active:!0},{rule_id:2010,source_system:"MUREX",source_trader_uuid:"d3a6f12c-0e2a-3b8d-bf4b-fa1d8c0b6e2f",internal_trader_id:"CREDIT06",email:"robert.walsh@demo-bank.com",active:!1}]),[_,m]=i.useState([{rule_id:3001,source_system:"BLBG",account_name:"TRADER_001_FX",broker:"JPMorgan Securities",broker_leid:"5493001KJTIIGC8Y1R12",comments:"Primary FX broker partnership",active:!0},{rule_id:3002,source_system:"BLBG",account_name:"TRADER_002_FIXED",broker:"Goldman Sachs",broker_leid:"W22LROWP2IHZNBB6K528",comments:"Fixed income broker",active:!0},{rule_id:3003,source_system:"MUREX",account_name:"DESK_RATES_APAC",broker:"Nomura",broker_leid:"6B9Z8J8LK5C9X2M4Q7V3",comments:"APAC rates broker",active:!0},{rule_id:3004,source_system:"MUREX",account_name:"DESK_RATES_EMEA",broker:"Deutsche Bank",broker_leid:"HB6WPR2FRRXLMWBLRP29",comments:"EMEA rates desk broker",active:!0},{rule_id:3005,source_system:"SUMMIT",account_name:"EQUITY_DESK_NA",broker:"Morgan Stanley",broker_leid:"4ABQU46RHEBAXFAOXFF7",comments:"Equity derivatives broker",active:!0},{rule_id:3006,source_system:"SUMMIT",account_name:"EQUITY_DESK_EMEA",broker:"Barclays",broker_leid:"G5GSEF7XJ5AQB589XV76",comments:"UK equity broker",active:!0},{rule_id:3007,source_system:"BLBG",account_name:"CREDIT_DESK",broker:"Bank of America Merrill Lynch",broker_leid:"B76ZR46FFB69PWRMQ175",comments:"Credit products broker",active:!0},{rule_id:3008,source_system:"MUREX",account_name:"COMMODITIES_DESK",broker:"Shell Trading",broker_leid:"SHLTDJC8CQVPJG4J8K2L",comments:"Commodity trading broker",active:!1},{rule_id:3009,source_system:"SUMMIT",account_name:"VOL_DESK",broker:"Volatility Partners Inc",broker_leid:"VOLPRT2MNQXYZC5F8D3R",comments:"Volatility trading specialist",active:!0},{rule_id:3010,source_system:"BLBG",account_name:"DESK_RATES_EMEA",broker:"BNP Paribas",broker_leid:"R0MUWZ35BNRQ6SG9V2F4",comments:"European rates broker",active:!0}]),[F,N]=i.useState([{rule_id:4001,source_system:"BLBG",account_name:"TRADER_001_FX",clearer:"LCH SwapClear",clearer_leid:"8945009FHGH9LJMD3N87",comments:"OTC derivatives clearing for FX",active:!0},{rule_id:4002,source_system:"BLBG",account_name:"TRADER_002_FIXED",clearer:"LCH ForexClear",clearer_leid:"8945009FHGH9LJMD3N87",comments:"FX clearing house",active:!0},{rule_id:4003,source_system:"MUREX",account_name:"DESK_RATES_APAC",clearer:"Japan Securities Clearing Corporation",clearer_leid:"1J4F8KNMHZX0PQVW2R6T",comments:"APAC securities clearing",active:!0},{rule_id:4004,source_system:"MUREX",account_name:"DESK_RATES_EMEA",clearer:"Eurex Clearing",clearer_leid:"HKU3868ZQH0MQ4YTGH14",comments:"European derivatives clearing",active:!0},{rule_id:4005,source_system:"SUMMIT",account_name:"EQUITY_DESK_NA",clearer:"CME Clearing",clearer_leid:"CME000B7M47OTC0GME01",comments:"CME Group clearing for US equities",active:!0},{rule_id:4006,source_system:"SUMMIT",account_name:"EQUITY_DESK_EMEA",clearer:"LCH Clearnet",clearer_leid:"8945009FHGH9LJMD3N87",comments:"European equity clearing",active:!0},{rule_id:4007,source_system:"BLBG",account_name:"CREDIT_DESK",clearer:"Intercontinental Exchange",clearer_leid:"254900CMNHE6FXR0FG39",comments:"ICE clearing for credit products",active:!0},{rule_id:4008,source_system:"MUREX",account_name:"COMMODITIES_DESK",clearer:"ICE Futures U.S.",clearer_leid:"254900CMNHE6FXR0FG39",comments:"Commodity futures clearing",active:!0},{rule_id:4009,source_system:"SUMMIT",account_name:"VOL_DESK",clearer:"LCH SwapClear",clearer_leid:"8945009FHGH9LJMD3N87",comments:"Volatility derivatives clearing",active:!1},{rule_id:4010,source_system:"BLBG",account_name:"DESK_RATES_EMEA",clearer:"SIX x-clear",clearer_leid:"5GRX0FHZM7PYQLW9X3N5",comments:"Swiss clearing house",active:!0}]),[E,u]=i.useState([{rule_id:1001,rule_type:"PORTFOLIO",source_system:"BLBG",trader_account_id:"TRADER_001_FX",instrument_code:"EURUSD",portfolio_code:"PORT_FX_EU_001",comments:"Bloomberg FX desk EUR/USD spot trades",active:!0},{rule_id:1002,rule_type:"PORTFOLIO",source_system:"BLBG",trader_account_id:"TRADER_001_FX",instrument_code:"GBPUSD",portfolio_code:"PORT_FX_GB_001",comments:"Bloomberg FX desk GBP/USD spot trades",active:!0},{rule_id:1003,rule_type:"PORTFOLIO",source_system:"BLBG",trader_account_id:"TRADER_001_FX",instrument_code:"",portfolio_code:"PORT_FX_OTHER_001",comments:"Bloomberg FX desk - any other currency pairs",active:!0},{rule_id:1004,rule_type:"PORTFOLIO",source_system:"MUREX",trader_account_id:"DESK_RATES_APAC",instrument_code:"IRS_JPY_5Y",portfolio_code:"PORT_RATES_JPY_APAC",comments:"Murex rates desk - JPY 5Y IRS from APAC",active:!0},{rule_id:1005,rule_type:"PORTFOLIO",source_system:"MUREX",trader_account_id:"DESK_RATES_APAC",instrument_code:"IRS_AUD_10Y",portfolio_code:"PORT_RATES_AUD_APAC",comments:"Murex rates desk - AUD 10Y IRS from APAC",active:!0},{rule_id:1006,rule_type:"PORTFOLIO",source_system:"MUREX",trader_account_id:"DESK_RATES_EMEA",instrument_code:"IRS_EUR_2Y",portfolio_code:"PORT_RATES_EUR_EMEA",comments:"Murex rates desk - EUR 2Y IRS from EMEA",active:!0},{rule_id:1007,rule_type:"PORTFOLIO",source_system:"MUREX",trader_account_id:"DESK_RATES_EMEA",instrument_code:"IRS_EUR_10Y",portfolio_code:"PORT_RATES_EUR_LONG_EMEA",comments:"Murex rates desk - EUR long-dated IRS from EMEA",active:!0},{rule_id:1008,rule_type:"PORTFOLIO",source_system:"MUREX",trader_account_id:"DESK_RATES_EMEA",instrument_code:"",portfolio_code:"PORT_RATES_OTHER_EMEA",comments:"Murex rates desk - any other instruments",active:!0},{rule_id:1009,rule_type:"PORTFOLIO",source_system:"SUMMIT",trader_account_id:"EQUITY_DESK_NA",instrument_code:"SPX",portfolio_code:"PORT_EQ_SPX_NA",comments:"Summit equity desk - S&P 500 index",active:!0},{rule_id:1010,rule_type:"PORTFOLIO",source_system:"SUMMIT",trader_account_id:"EQUITY_DESK_NA",instrument_code:"NDX",portfolio_code:"PORT_EQ_NDX_NA",comments:"Summit equity desk - NASDAQ 100 index",active:!0},{rule_id:1011,rule_type:"PORTFOLIO",source_system:"SUMMIT",trader_account_id:"EQUITY_DESK_EMEA",instrument_code:"STOXX600",portfolio_code:"PORT_EQ_STOXX_EMEA",comments:"Summit equity desk - STOXX 600 European index",active:!0},{rule_id:1012,rule_type:"PORTFOLIO",source_system:"SUMMIT",trader_account_id:"EQUITY_DESK_EMEA",instrument_code:"FTSE100",portfolio_code:"PORT_EQ_FTSE_EMEA",comments:"Summit equity desk - FTSE 100 UK index",active:!1},{rule_id:1013,rule_type:"PORTFOLIO",source_system:"BLBG",trader_account_id:"TRADER_002_FIXED",instrument_code:"US_BOND_10Y",portfolio_code:"PORT_BONDS_US_10Y",comments:"Bloomberg fixed income desk - US 10Y Treasury",active:!0},{rule_id:1014,rule_type:"PORTFOLIO",source_system:"BLBG",trader_account_id:"TRADER_002_FIXED",instrument_code:"US_BOND_5Y",portfolio_code:"PORT_BONDS_US_5Y",comments:"Bloomberg fixed income desk - US 5Y Treasury",active:!0},{rule_id:1015,rule_type:"PORTFOLIO",source_system:"BLBG",trader_account_id:"TRADER_002_FIXED",instrument_code:"",portfolio_code:"PORT_BONDS_OTHER",comments:"Bloomberg fixed income desk - other bonds/credits",active:!0},{rule_id:1016,rule_type:"PORTFOLIO",source_system:"MUREX",trader_account_id:"COMMODITIES_DESK",instrument_code:"CRUDE_WTI",portfolio_code:"PORT_CMDTY_WTI",comments:"Murex commodities - WTI crude oil",active:!0},{rule_id:1017,rule_type:"PORTFOLIO",source_system:"MUREX",trader_account_id:"COMMODITIES_DESK",instrument_code:"GOLD",portfolio_code:"PORT_CMDTY_GOLD",comments:"Murex commodities - precious metals",active:!0},{rule_id:1018,rule_type:"PORTFOLIO",source_system:"SUMMIT",trader_account_id:"VOL_DESK",instrument_code:"VIX",portfolio_code:"PORT_VOL_VIX",comments:"Summit volatility desk - VIX index",active:!0},{rule_id:1019,rule_type:"PORTFOLIO",source_system:"SUMMIT",trader_account_id:"VOL_DESK",instrument_code:"MOVE",portfolio_code:"PORT_VOL_MOVE",comments:"Summit volatility desk - MOVE bond volatility index",active:!0},{rule_id:1020,rule_type:"PORTFOLIO",source_system:"BLBG",trader_account_id:"CREDIT_DESK",instrument_code:"CDS_INDEX_HY",portfolio_code:"PORT_CREDIT_HY",comments:"Bloomberg credit desk - High yield CDS index",active:!0}]),R=E.filter(r=>r.trader_account_id.toLowerCase().includes(h.toLowerCase())||r.instrument_code.toLowerCase().includes(h.toLowerCase())||r.portfolio_code.toLowerCase().includes(h.toLowerCase())||r.source_system.toLowerCase().includes(h.toLowerCase())),v=async r=>{r.preventDefault();try{if(!f.source_system||!f.trader_account_id||!f.portfolio_code){d("Error: Source system, trader account, and portfolio code are required");return}const j={rule_id:Math.max(...E.map(M=>M.rule_id),0)+1,rule_type:"PORTFOLIO",source_system:f.source_system,trader_account_id:f.trader_account_id,instrument_code:f.instrument_code||"",portfolio_code:f.portfolio_code,comments:f.comments||"",active:f.active!==!1};u([...E,j]),d("✓ Mapping created successfully"),y(!1),a({}),setTimeout(()=>d(""),3e3)}catch(j){d(`Error: ${j.message}`)}},A=r=>{u(E.map(j=>j.rule_id===r?{...j,active:!j.active}:j))},l=r=>{u(E.filter(j=>j.rule_id!==r)),d("✓ Mapping deleted"),setTimeout(()=>d(""),3e3)};return e.jsxs("div",{style:{fontFamily:$},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h2",{style:{margin:0,fontSize:"15px",fontWeight:"700",color:"#1f2933",paddingBottom:"12px",borderBottom:"1px solid #e5e7eb"},children:"Enrichment Mappings"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#4b5563"},children:"Manage enrichment rules that map source system data to internal identifiers"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("button",{onClick:()=>{b("portfolio"),y(!1)},style:{padding:"8px 16px",backgroundColor:"transparent",color:o==="portfolio"?"#1d4ed8":"#6b7280",border:"none",borderBottom:o==="portfolio"?"2px solid #1d4ed8":"2px solid transparent",cursor:"pointer",fontWeight:o==="portfolio"?"600":"500",fontSize:"13px",fontFamily:$},children:"Portfolio Enrichment"}),e.jsx("button",{onClick:()=>{b("trader"),y(!1)},style:{padding:"8px 16px",backgroundColor:"transparent",color:o==="trader"?"#1d4ed8":"#6b7280",border:"none",borderBottom:o==="trader"?"2px solid #1d4ed8":"2px solid transparent",cursor:"pointer",fontWeight:o==="trader"?"600":"500",fontSize:"13px",fontFamily:$},children:"Trader Enrichment"}),e.jsx("button",{onClick:()=>{b("broker"),y(!1)},style:{padding:"8px 16px",backgroundColor:"transparent",color:o==="broker"?"#1d4ed8":"#6b7280",border:"none",borderBottom:o==="broker"?"2px solid #1d4ed8":"2px solid transparent",cursor:"pointer",fontWeight:o==="broker"?"600":"500",fontSize:"13px",fontFamily:$},children:"Broker Enrichment"}),e.jsx("button",{onClick:()=>{b("clearer"),y(!1)},style:{padding:"8px 16px",backgroundColor:"transparent",color:o==="clearer"?"#1d4ed8":"#6b7280",border:"none",borderBottom:o==="clearer"?"2px solid #1d4ed8":"2px solid transparent",cursor:"pointer",fontWeight:o==="clearer"?"600":"500",fontSize:"13px",fontFamily:$},children:"Clearer Enrichment"})]}),n&&e.jsx("div",{style:{padding:"8px 12px",marginBottom:"16px",backgroundColor:n.includes("Error")?"#fee2e2":"#d1fae5",color:n.includes("Error")?"#7f1d1d":"#065f46",borderRadius:"4px",border:`1px solid ${n.includes("Error")?"#fecaca":"#a7f3d0"}`,fontSize:"12px"},children:n}),o==="portfolio"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:"20px"},children:[e.jsxs("div",{children:[!c&&e.jsx("button",{onClick:()=>y(!0),style:{width:"100%",padding:"10px 12px",backgroundColor:"#1d4ed8",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",marginBottom:"16px",fontFamily:$},children:"New Mapping"}),c&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("form",{onSubmit:v,style:{display:"grid",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase"},children:"Source System *"}),e.jsxs("select",{value:f.source_system||"",onChange:r=>a({...f,source_system:r.target.value}),style:{width:"100%",padding:"8px 10px",backgroundColor:"#f9fafb",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:$},children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"BLBG",children:"BLBG (Bloomberg)"}),e.jsx("option",{value:"MUREX",children:"MUREX"}),e.jsx("option",{value:"SUMMIT",children:"SUMMIT"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase"},children:"Trader/Account ID *"}),e.jsx("input",{type:"text",value:f.trader_account_id||"",onChange:r=>a({...f,trader_account_id:r.target.value}),placeholder:"e.g., TRADER_001",style:{width:"100%",padding:"8px 10px",backgroundColor:"#f9fafb",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:$}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase"},children:"Instrument Code (optional)"}),e.jsx("input",{type:"text",value:f.instrument_code||"",onChange:r=>a({...f,instrument_code:r.target.value}),placeholder:"e.g., EURUSD (leave blank for any)",style:{width:"100%",padding:"8px 10px",backgroundColor:"#f9fafb",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:$}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase"},children:"Portfolio Code *"}),e.jsx("input",{type:"text",value:f.portfolio_code||"",onChange:r=>a({...f,portfolio_code:r.target.value}),placeholder:"e.g., PORT_FX_EU_001",style:{width:"100%",padding:"8px 10px",backgroundColor:"#f9fafb",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:$}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"600",color:"#4b5563",marginBottom:"4px",textTransform:"uppercase"},children:"Comments"}),e.jsx("textarea",{value:f.comments||"",onChange:r=>a({...f,comments:r.target.value}),placeholder:"Optional notes about this mapping",style:{width:"100%",padding:"8px 10px",backgroundColor:"#f9fafb",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:$,minHeight:"60px",lineHeight:"1.4"}})]}),e.jsx("div",{children:e.jsxs("label",{style:{display:"flex",alignItems:"center",fontSize:"11px",fontWeight:"600",color:"#4b5563",gap:"6px"},children:[e.jsx("input",{type:"checkbox",checked:f.active!==!1,onChange:r=>a({...f,active:r.target.checked})}),"Active"]})}),e.jsx("button",{type:"submit",style:{padding:"10px 12px",backgroundColor:"#1d4ed8",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:$,marginTop:"8px"},children:"Create Mapping"})]}),e.jsx("button",{onClick:()=>{y(!1),a({})},style:{width:"100%",padding:"8px 12px",marginTop:"8px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:$},children:"Cancel"})]}),e.jsx("div",{style:{marginTop:"16px"},children:e.jsx("input",{type:"text",placeholder:"Search mappings...",value:h,onChange:r=>S(r.target.value),style:{width:"100%",padding:"8px 10px",backgroundColor:"#f9fafb",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:$}})}),e.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"4px"},children:e.jsxs("div",{style:{fontSize:"11px",color:"#4b5563",marginBottom:"8px"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Summary"}),e.jsxs("div",{children:["Total: ",E.length]}),e.jsxs("div",{children:["Active: ",E.filter(r=>r.active).length]}),e.jsxs("div",{children:["Inactive: ",E.filter(r=>!r.active).length]})]})})]}),e.jsx("div",{children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",fontFamily:$,backgroundColor:"#fff"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Rule ID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"System"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Trader/Account"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Instrument"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Portfolio Code"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Comments"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Active"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Action"})]})}),e.jsx("tbody",{children:R.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{padding:"16px 12px",textAlign:"center",color:"#9ca3af"},children:"No mappings found"})}):R.map((r,j)=>e.jsxs("tr",{style:{backgroundColor:j%2===0?"#fff":"#f9fafb",borderBottom:"1px solid #e5e7eb",opacity:r.active?1:.6},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600"},children:r.rule_id}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"500"},children:r.source_system}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563"},children:r.trader_account_id}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563"},children:r.instrument_code||e.jsx("span",{style:{color:"#9ca3af",fontStyle:"italic"},children:"any"})}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"500",fontFamily:"monospace"},children:r.portfolio_code}),e.jsx("td",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"10px"},children:r.comments}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsx("button",{onClick:()=>A(r.rule_id),style:{padding:"3px 8px",backgroundColor:r.active?"#d1fae5":"#fee2e2",color:r.active?"#065f46":"#7f1d1d",border:"none",borderRadius:"3px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:r.active?"YES":"NO"})}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsx("button",{onClick:()=>l(r.rule_id),style:{padding:"3px 8px",backgroundColor:"#fee2e2",color:"#7f1d1d",border:"none",borderRadius:"3px",fontSize:"10px",fontWeight:"600",cursor:"pointer"},children:"Delete"})})]},r.rule_id))})]})})})]}),o==="trader"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"4px"},children:e.jsxs("div",{style:{fontSize:"11px",color:"#4b5563",marginBottom:"8px"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Summary"}),e.jsxs("div",{children:["Total: ",p.length]}),e.jsxs("div",{children:["Active: ",p.filter(r=>r.active).length]}),e.jsxs("div",{children:["Inactive: ",p.filter(r=>!r.active).length]})]})}),e.jsx("div",{style:{marginTop:"16px"},children:e.jsx("input",{type:"text",placeholder:"Search traders...",value:h,onChange:r=>S(r.target.value),style:{width:"100%",padding:"8px 10px",backgroundColor:"#f9fafb",color:"#1f2933",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:$}})})]}),e.jsx("div",{children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",fontFamily:$,backgroundColor:"#fff"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Rule ID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"System"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Source UUID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Internal ID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Email"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Active"})]})}),e.jsx("tbody",{children:p.filter(r=>r.internal_trader_id.toLowerCase().includes(h.toLowerCase())||r.email.toLowerCase().includes(h.toLowerCase())||r.source_system.toLowerCase().includes(h.toLowerCase())).map((r,j)=>e.jsxs("tr",{style:{backgroundColor:j%2===0?"#fff":"#f9fafb",borderBottom:"1px solid #e5e7eb",opacity:r.active?1:.6},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600"},children:r.rule_id}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"500"},children:r.source_system}),e.jsxs("td",{style:{padding:"8px 12px",color:"#4b5563",fontSize:"9px",fontFamily:"monospace"},children:[r.source_trader_uuid.substring(0,12),"..."]}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600"},children:r.internal_trader_id}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563"},children:r.email}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",backgroundColor:r.active?"#d1fae5":"#fee2e2",color:r.active?"#065f46":"#7f1d1d",borderRadius:"3px",fontSize:"10px",fontWeight:"600"},children:r.active?"YES":"NO"})})]},r.rule_id))})]})})})]}),o==="broker"&&e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",fontFamily:$,backgroundColor:"#fff"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Rule ID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"System"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Account"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Broker"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Broker LEID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Comments"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Active"})]})}),e.jsx("tbody",{children:_.filter(r=>r.account_name.toLowerCase().includes(h.toLowerCase())||r.broker.toLowerCase().includes(h.toLowerCase())||r.source_system.toLowerCase().includes(h.toLowerCase())).map((r,j)=>e.jsxs("tr",{style:{backgroundColor:j%2===0?"#fff":"#f9fafb",borderBottom:"1px solid #e5e7eb",opacity:r.active?1:.6},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600"},children:r.rule_id}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"500"},children:r.source_system}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563"},children:r.account_name}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"500"},children:r.broker}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563",fontSize:"9px",fontFamily:"monospace"},children:r.broker_leid}),e.jsx("td",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"10px"},children:r.comments}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",backgroundColor:r.active?"#d1fae5":"#fee2e2",color:r.active?"#065f46":"#7f1d1d",borderRadius:"3px",fontSize:"10px",fontWeight:"600"},children:r.active?"YES":"NO"})})]},r.rule_id))})]})}),o==="clearer"&&e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",fontFamily:$,backgroundColor:"#fff"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Rule ID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"System"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Account"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Clearer"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Clearer LEID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Comments"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase"},children:"Active"})]})}),e.jsx("tbody",{children:F.filter(r=>r.account_name.toLowerCase().includes(h.toLowerCase())||r.clearer.toLowerCase().includes(h.toLowerCase())||r.source_system.toLowerCase().includes(h.toLowerCase())).map((r,j)=>e.jsxs("tr",{style:{backgroundColor:j%2===0?"#fff":"#f9fafb",borderBottom:"1px solid #e5e7eb",opacity:r.active?1:.6},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600"},children:r.rule_id}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"500"},children:r.source_system}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563"},children:r.account_name}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"500"},children:r.clearer}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563",fontSize:"9px",fontFamily:"monospace"},children:r.clearer_leid}),e.jsx("td",{style:{padding:"8px 12px",color:"#6b7280",fontSize:"10px"},children:r.comments}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",backgroundColor:r.active?"#d1fae5":"#fee2e2",color:r.active?"#065f46":"#7f1d1d",borderRadius:"3px",fontSize:"10px",fontWeight:"600"},children:r.active?"YES":"NO"})})]},r.rule_id))})]})})]})}const ke="",Ge="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif";function Qe(){const[o,b]=i.useState([]),[n,d]=i.useState(!1),[c,y]=i.useState(""),[f,a]=i.useState("success"),[h,S]=i.useState("ALL"),[p,z]=i.useState(null),[_,m]=i.useState(""),[F,N]=i.useState("");i.useEffect(()=>{E()},[]);const E=async()=>{d(!0);try{const l=await fetch(`${ke}/api/v1/trades/`);if(!l.ok)throw new Error(`HTTP ${l.status}`);const r=await l.json();b(Array.isArray(r)?r:[])}catch(l){console.error("Error fetching trades:",l),b([])}finally{d(!1)}},u=async l=>{if(window.confirm("Are you sure you want to cancel this trade?"))try{const r=await fetch(`${ke}/api/v1/trades/${l}/cancel`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!r.ok){let j=`HTTP ${r.status}`;try{const M=await r.text();try{const w=JSON.parse(M);j=w.detail||w.message||M}catch{j=M||j}}catch{j=`HTTP ${r.status}: ${r.statusText}`}throw new Error(j)}y("Trade cancelled successfully"),a("success"),await E(),z(null),setTimeout(()=>y(""),3e3)}catch(r){y(`Error: ${r.message}`),a("error")}},R=async l=>{if(window.confirm("Are you sure you want to expire this trade?"))try{const r=await fetch(`${ke}/api/v1/trades/${l}/expire`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!r.ok){let j=`HTTP ${r.status}`;try{const M=await r.text();try{const w=JSON.parse(M);j=w.detail||w.message||M}catch{j=M||j}}catch{j=`HTTP ${r.status}: ${r.statusText}`}throw new Error(j)}y("Trade expired successfully"),a("success"),await E(),z(null),setTimeout(()=>y(""),3e3)}catch(r){y(`Error: ${r.message}`),a("error")}},v=l=>{switch(l){case"FILLED":case"ACTIVE":return{bg:"#d1fae5",text:"#065f46",border:"#a7f3d0"};case"PENDING":return{bg:"#fef3c7",text:"#78350f",border:"#fde68a"};case"CANCELLED":return{bg:"#fee2e2",text:"#7f1d1d",border:"#fecaca"};case"EXPIRED":return{bg:"#f3f4f6",text:"#374151",border:"#d1d5db"};default:return{bg:"#f3f4f6",text:"#374151",border:"#e5e7eb"}}},A=o.filter(l=>{var r,j;return!(h!=="ALL"&&l.status!==h||_&&!((r=l.instrument)!=null&&r.toLowerCase().includes(_.toLowerCase()))||F&&!((j=l.trader)!=null&&j.toLowerCase().includes(F.toLowerCase())))});return e.jsxs("div",{style:{fontFamily:Ge},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h2",{style:{margin:0,fontSize:"15px",fontWeight:"700",color:"#1f2933",paddingBottom:"12px",borderBottom:"1px solid #e5e7eb"},children:"Trade Module"}),e.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#4b5563"},children:"Monitor and manage all trades. Cancel or expire trades as needed."})]}),c&&e.jsxs("div",{style:{padding:"10px 12px",marginBottom:"16px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",backgroundColor:f==="success"?"#d1fae5":"#fee2e2",color:f==="success"?"#065f46":"#7f1d1d",border:`1px solid ${f==="success"?"#a7f3d0":"#fecaca"}`,display:"flex",alignItems:"center",gap:"8px"},children:[f==="success"?"✓":"✕"," ",c]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 350px",gap:"20px"},children:[e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"6px",overflow:"hidden",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#f9fafb"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"13px",fontWeight:"700",color:"#1f2933"},children:["Trades (",A.length,")"]}),e.jsx("button",{onClick:E,style:{padding:"6px 12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:l=>l.target.style.backgroundColor="#e5e7eb",onMouseLeave:l=>l.target.style.backgroundColor="#f3f4f6",children:"Refresh"})]}),e.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#f9fafb",display:"flex",gap:"8px",alignItems:"center",borderBottom:"1px solid #e5e7eb",flexWrap:"wrap"},children:[e.jsxs("select",{value:h,onChange:l=>S(l.target.value),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"3px",fontSize:"11px",backgroundColor:"#fff",boxSizing:"border-box",minWidth:"100px"},children:[e.jsx("option",{value:"ALL",children:"All Status"}),e.jsx("option",{value:"FILLED",children:"Filled"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"}),e.jsx("option",{value:"EXPIRED",children:"Expired"})]}),e.jsx("input",{type:"text",placeholder:"Instrument",value:_,onChange:l=>m(l.target.value),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"3px",fontSize:"11px",backgroundColor:"#fff",boxSizing:"border-box",minWidth:"100px"}}),e.jsx("input",{type:"text",placeholder:"Trader",value:F,onChange:l=>N(l.target.value),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"3px",fontSize:"11px",backgroundColor:"#fff",boxSizing:"border-box",minWidth:"100px"}})]}),n?e.jsx("div",{style:{padding:"30px",textAlign:"center",color:"#9ca3af",fontSize:"12px"},children:"Loading..."}):A.length===0?e.jsx("div",{style:{padding:"30px",textAlign:"center",color:"#9ca3af",fontSize:"12px"},children:"No trades found"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"TRADE ID"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"INSTR"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"SIDE"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"QTY"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"PRICE"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"TRADER"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",fontWeight:"700",color:"#4b5563",fontSize:"10px"},children:"ACTIONS"})]})}),e.jsx("tbody",{children:A.map((l,r)=>{const j=v(l.status),M=(p==null?void 0:p.trade_id)===l.trade_id;return e.jsxs("tr",{onClick:()=>z(l),style:{backgroundColor:M?"#dbeafe":r%2===0?"#fff":"#f9fafb",borderBottom:"1px solid #e5e7eb",cursor:"pointer",transition:"background-color 0.15s",borderLeft:M?"3px solid #1d4ed8":"3px solid transparent"},onMouseEnter:w=>{M||(w.currentTarget.style.backgroundColor="#f0f9ff")},onMouseLeave:w=>{w.currentTarget.style.backgroundColor=M?"#dbeafe":r%2===0?"#fff":"#f9fafb"},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600",fontSize:"11px"},children:String(l.trade_id||"-").substring(0,12)}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600",fontSize:"11px"},children:l.instrument}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",color:l.side==="BUY"?"#10b981":"#ef4444",fontWeight:"600",fontSize:"11px"},children:l.side}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#4b5563",fontSize:"11px"},children:l.qty}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#4b5563",fontSize:"11px"},children:l.price}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563",fontSize:"11px"},children:l.trader}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-block",padding:"3px 8px",borderRadius:"3px",fontSize:"10px",fontWeight:"700",backgroundColor:j.bg,color:j.text,border:`1px solid ${j.border}`},children:l.status})}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsx("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:l.status==="ACTIVE"||l.status==="FILLED"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:w=>{w.stopPropagation(),u(l.trade_id)},style:{padding:"3px 6px",backgroundColor:"transparent",color:"#ef4444",border:"none",borderRadius:"2px",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:w=>w.target.style.backgroundColor="#fee2e2",onMouseLeave:w=>w.target.style.backgroundColor="transparent",children:"Cancel"}),e.jsx("button",{onClick:w=>{w.stopPropagation(),R(l.trade_id)},style:{padding:"3px 6px",backgroundColor:"transparent",color:"#6b7280",border:"none",borderRadius:"2px",fontSize:"10px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:w=>w.target.style.backgroundColor="#f3f4f6",onMouseLeave:w=>w.target.style.backgroundColor="transparent",children:"Expire"})]}):e.jsx("span",{style:{fontSize:"10px",color:"#9ca3af"},children:"—"})})})]},r)})})]})})]}),p&&e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"6px",padding:"16px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",border:"1px solid #e5e7eb",height:"fit-content",position:"sticky",top:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"13px",fontWeight:"700",color:"#1f2933",paddingBottom:"12px",borderBottom:"1px solid #e5e7eb"},children:"Trade Details"}),e.jsxs("div",{style:{display:"grid",gap:"12px",fontSize:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#4b5563",fontWeight:"600",marginBottom:"4px"},children:"Trade ID"}),e.jsx("div",{style:{color:"#1f2933",fontFamily:"monospace"},children:p.trade_id})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#4b5563",fontWeight:"600",marginBottom:"4px"},children:"Instrument"}),e.jsx("div",{style:{color:"#1f2933",fontWeight:"600"},children:p.instrument})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#4b5563",fontWeight:"600",marginBottom:"4px"},children:"Side"}),e.jsx("div",{style:{color:p.side==="BUY"?"#10b981":"#ef4444",fontWeight:"600"},children:p.side})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#4b5563",fontWeight:"600",marginBottom:"4px"},children:"Quantity"}),e.jsx("div",{style:{color:"#1f2933"},children:p.qty})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#4b5563",fontWeight:"600",marginBottom:"4px"},children:"Price"}),e.jsx("div",{style:{color:"#1f2933"},children:p.price})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#4b5563",fontWeight:"600",marginBottom:"4px"},children:"Status"}),e.jsx("div",{style:{display:"inline-block",padding:"3px 8px",borderRadius:"3px",fontSize:"10px",fontWeight:"700",backgroundColor:v(p.status).bg,color:v(p.status).text,border:`1px solid ${v(p.status).border}`},children:p.status})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#4b5563",fontWeight:"600",marginBottom:"4px"},children:"Trader"}),e.jsx("div",{style:{color:"#1f2933"},children:p.trader})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#4b5563",fontWeight:"600",marginBottom:"4px"},children:"Broker"}),e.jsx("div",{style:{color:"#1f2933"},children:p.broker_id||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#4b5563",fontWeight:"600",marginBottom:"4px"},children:"Exec Time"}),e.jsx("div",{style:{color:"#1f2933",fontSize:"11px"},children:p.exec_time?new Date(p.exec_time).toLocaleString():"—"})]}),e.jsxs("div",{style:{paddingTop:"12px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"8px",flexDirection:"column"},children:[(p.status==="ACTIVE"||p.status==="FILLED")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>u(p.trade_id),style:{padding:"8px 12px",backgroundColor:"#ef4444",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",fontSize:"12px",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:l=>l.target.style.backgroundColor="#dc2626",onMouseLeave:l=>l.target.style.backgroundColor="#ef4444",children:"Cancel Trade"}),e.jsx("button",{onClick:()=>R(p.trade_id),style:{padding:"8px 12px",backgroundColor:"#6b7280",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",fontSize:"12px",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:l=>l.target.style.backgroundColor="#4b5563",onMouseLeave:l=>l.target.style.backgroundColor="#6b7280",children:"Expire Trade"})]}),e.jsx("button",{onClick:()=>z(null),style:{padding:"8px 12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",fontWeight:"600",fontSize:"12px",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:l=>l.target.style.backgroundColor="#e5e7eb",onMouseLeave:l=>l.target.style.backgroundColor="#f3f4f6",children:"Close Details"})]})]})]})]})]})}const K="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif";function Je(){const[o,b]=i.useState([]),[n,d]=i.useState(null),[c,y]=i.useState(!1),[f,a]=i.useState(""),[h,S]=i.useState("success"),[p,z]=i.useState({dateFrom:null,dateTo:null,instrument:"",trader:"",counterparty:"",statuses:[]}),[_,m]=i.useState("all"),[F,N]=i.useState("createdAt"),[E,u]=i.useState("desc"),[R,v]=i.useState(1),[A]=i.useState(20);i.useEffect(()=>{l()},[p,F,E,R]);const l=async()=>{y(!0);try{const T=rt();b(T),a("")}catch(T){a(`Error: ${T.message}`),S("error")}finally{y(!1)}},r=async T=>{if(window.confirm("Confirm match of this trade?"))try{a("✓ Trade matched successfully"),S("success"),d({...n,status:"Matched"}),b(o.map(D=>D.id===T?{...D,status:"Matched"}:D)),setTimeout(()=>a(""),3e3)}catch(D){a(`Error: ${D.message}`),S("error")}},j=async(T,D)=>{try{a("✓ Override applied. Reason logged."),S("success"),d({...n,status:"Matched"}),b(o.map(P=>P.id===T?{...P,status:"Matched"}:P)),setTimeout(()=>a(""),3e3)}catch(P){a(`Error: ${P.message}`),S("error")}},M=async(T,D,P)=>{try{a(`✓ Status updated to ${D}`),S("success"),d({...n,status:D}),b(o.map(U=>U.id===T?{...U,status:D}:U)),setTimeout(()=>a(""),3e3)}catch(U){a(`Error: ${U.message}`),S("error")}},w=async T=>{try{a("✓ Trade dismissed"),S("success"),b(o.filter(D=>D.id!==T)),d(null),setTimeout(()=>a(""),3e3)}catch(D){a(`Error: ${D.message}`),S("error")}};return e.jsxs("div",{style:{fontFamily:K,width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{padding:"8px 12px",background:"#f8fafc",border:"1px solid #e6edf3",borderRadius:6},children:[e.jsx("strong",{style:{color:"#0f172a"},children:"Confirmations Module"}),e.jsx("span",{style:{marginLeft:12,color:"#475569"},children:"— mounted"}),e.jsxs("span",{style:{float:"right",color:"#475569"},children:["Count: ",o.length]})]}),f&&e.jsx("div",{style:{padding:"10px 16px",marginBottom:"8px",backgroundColor:h==="success"?"#d1fae5":"#fee2e2",color:h==="success"?"#065f46":"#7f1d1d",borderRadius:"6px",border:`1px solid ${h==="success"?"#a7f3d0":"#fecaca"}`,fontSize:"12px",fontWeight:"500"},children:f}),e.jsx(Ve,{filters:p,onFilterChange:z,onReset:()=>{z({dateFrom:null,dateTo:null,instrument:"",trader:"",counterparty:"",statuses:[]}),v(1)}}),e.jsx(Ze,{activeFilter:_,onFilterSelect:T=>{m(T),v(1)}}),e.jsxs("div",{style:{display:"flex",flex:1,gap:"20px",overflow:"auto",minHeight:0},children:[e.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:e.jsx(et,{confirmations:o,selectedId:n==null?void 0:n.id,onSelectRow:T=>d(T),onSort:T=>{N(T),u(E==="asc"?"desc":"asc")},sortBy:F,sortDir:E,isLoading:c,page:R,pageSize:A,onPageChange:v})}),e.jsx("div",{style:{width:"320px",overflow:"auto",minHeight:0},children:e.jsx(tt,{confirmation:n,onMatch:()=>n&&r(n.id),onOverride:T=>n&&j(n.id),onUpdateStatus:(T,D)=>n&&M(n.id,T),onIgnore:()=>n&&w(n.id)})})]})]})}function Ve({filters:o,onFilterChange:b,onReset:n}){return e.jsxs("div",{style:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"12px 16px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"12px",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"10px",fontWeight:"700",color:"#4b5563",textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"Date From"}),e.jsx("input",{type:"date",value:o.dateFrom||"",onChange:d=>b({...o,dateFrom:d.target.value}),style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"10px",fontWeight:"700",color:"#4b5563",textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"Date To"}),e.jsx("input",{type:"date",value:o.dateTo||"",onChange:d=>b({...o,dateTo:d.target.value}),style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"10px",fontWeight:"700",color:"#4b5563",textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"Instrument"}),e.jsx("input",{type:"text",placeholder:"ES, NQ...",value:o.instrument,onChange:d=>b({...o,instrument:d.target.value}),style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",backgroundColor:"#f9fafb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"10px",fontWeight:"700",color:"#4b5563",textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"Trader"}),e.jsx("input",{type:"text",placeholder:"TRADER1",value:o.trader,onChange:d=>b({...o,trader:d.target.value}),style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",backgroundColor:"#f9fafb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"10px",fontWeight:"700",color:"#4b5563",textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"Counterparty"}),e.jsx("input",{type:"text",placeholder:"JPM, GS...",value:o.counterparty,onChange:d=>b({...o,counterparty:d.target.value}),style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",backgroundColor:"#f9fafb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"10px",fontWeight:"700",color:"#4b5563",textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"Status"}),e.jsxs("select",{multiple:!0,value:o.statuses,onChange:d=>b({...o,statuses:Array.from(d.target.selectedOptions,c=>c.value)}),style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",backgroundColor:"#f9fafb"},children:[e.jsx("option",{value:"Unmatched",children:"Unmatched"}),e.jsx("option",{value:"Matched",children:"Matched"}),e.jsx("option",{value:"One-sided",children:"One-sided"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Error",children:"Error"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx("button",{onClick:n,style:{padding:"6px 12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"12px",fontFamily:K},children:"Reset Filters"})})]})}function Ze({activeFilter:o,onFilterSelect:b}){const n=[{key:"all",label:"All"},{key:"unmatched",label:"Unmatched"},{key:"one-sided",label:"One-sided"},{key:"error",label:"Error"},{key:"matched-today",label:"Matched today"}];return e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:n.map(d=>e.jsx("button",{onClick:()=>b(d.key),style:{padding:"6px 12px",backgroundColor:o===d.key?"#1d4ed8":"#f3f4f6",color:o===d.key?"#fff":"#6b7280",border:`1px solid ${o===d.key?"#1d4ed8":"#d1d5db"}`,borderRadius:"20px",cursor:"pointer",fontWeight:"600",fontSize:"12px",transition:"all 0.15s",fontFamily:K},children:d.label},d.key))})}function et({confirmations:o,selectedId:b,onSelectRow:n,onSort:d,sortBy:c,sortDir:y,isLoading:f,page:a,pageSize:h,onPageChange:S}){const p=m=>{const F={Matched:{bg:"#d1fae5",text:"#065f46",icon:"✓"},Unmatched:{bg:"#fef3c7",text:"#92400e",icon:""},"One-sided":{bg:"#fef3c7",text:"#92400e",icon:"⚠"},Pending:{bg:"#e3f2fd",text:"#1e40af",icon:""},Error:{bg:"#fee2e2",text:"#991b1b",icon:"!"},"In Progress":{bg:"#dbeafe",text:"#0c4a6e",icon:""},Cancelled:{bg:"#f3f4f6",text:"#6b7280",icon:""}};return F[m]||F.Cancelled},z=o.slice((a-1)*h,a*h),_=Math.ceil(o.length/h);return f?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#9ca3af"},children:"Loading..."}):o.length===0?e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"6px",padding:"40px",textAlign:"center",color:"#9ca3af",border:"1px solid #e5e7eb"},children:[e.jsx("p",{style:{margin:0,fontSize:"13px"},children:"No confirmations match your filters"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"11px"},children:"Try adjusting your date range or status filters"})]}):e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"6px",border:"1px solid #e5e7eb",overflow:"hidden"},children:[e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",fontFamily:K},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx(J,{label:"Trade ID",width:"120px",sortKey:"tradeId",sortBy:c,sortDir:y,onSort:d}),e.jsx(J,{label:"Ext Ref",width:"120px",sortKey:"externalRef",sortBy:c,sortDir:y,onSort:d}),e.jsx(J,{label:"Instrument",width:"100px",sortKey:"instrument",sortBy:c,sortDir:y,onSort:d}),e.jsx(J,{label:"Side",width:"60px",sortKey:"side",sortBy:c,sortDir:y,onSort:d}),e.jsx(J,{label:"Quantity",width:"80px",sortKey:"quantity",sortBy:c,sortDir:y,onSort:d,textAlign:"right"}),e.jsx(J,{label:"Price",width:"100px",sortKey:"price",sortBy:c,sortDir:y,onSort:d,textAlign:"right"}),e.jsx(J,{label:"Trader",width:"100px",sortKey:"trader",sortBy:c,sortDir:y,onSort:d}),e.jsx(J,{label:"Counterparty",width:"120px",sortKey:"counterparty",sortBy:c,sortDir:y,onSort:d}),e.jsx(J,{label:"Status",width:"120px",sortKey:"status",sortBy:c,sortDir:y,onSort:d}),e.jsx(J,{label:"Age",width:"80px",sortKey:"age",sortBy:c,sortDir:y,onSort:d,textAlign:"right"}),e.jsx(J,{label:"Source",width:"100px",sortKey:"source",sortBy:c,sortDir:y,onSort:d})]})}),e.jsx("tbody",{children:z.map((m,F)=>{var u,R,v;const N=p(m.status),E=b===m.id;return e.jsxs("tr",{onClick:()=>n(m),style:{backgroundColor:E?"#f0f9ff":F%2===0?"#fff":"#f9fafb",borderBottom:"1px solid #e5e7eb",borderLeft:E?"3px solid #1d4ed8":"3px solid transparent",cursor:"pointer",transition:"background-color 0.15s",height:"40px"},onMouseEnter:A=>{E||(A.currentTarget.style.backgroundColor="#f0f9ff")},onMouseLeave:A=>{E||(A.currentTarget.style.backgroundColor=F%2===0?"#fff":"#f9fafb")},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontWeight:"600",fontSize:"10px",fontFamily:"monospace"},children:m.tradeId}),e.jsxs("td",{style:{padding:"8px 12px",color:((u=m.mismatches)==null?void 0:u.length)>0?"#ef4444":"#1f2933",fontWeight:((R=m.mismatches)==null?void 0:R.length)>0?"700":"600",fontSize:"10px",fontFamily:"monospace"},children:[m.externalRef," ",((v=m.mismatches)==null?void 0:v.length)>0&&"✗"]}),e.jsx("td",{style:{padding:"8px 12px",color:"#1f2933",fontSize:"11px"},children:m.instrument}),e.jsx("td",{style:{padding:"8px 12px",color:m.side==="BUY"?"#10b981":"#ef4444",fontWeight:"600",fontSize:"11px"},children:m.side}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#4b5563",fontSize:"11px"},children:m.quantity}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#4b5563",fontSize:"11px",fontFamily:"monospace"},children:m.price.toFixed(2)}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563",fontSize:"11px"},children:m.trader}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563",fontSize:"11px"},children:m.counterparty}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center"},children:e.jsxs("span",{style:{display:"inline-block",padding:"3px 8px",borderRadius:"3px",fontSize:"10px",fontWeight:"700",backgroundColor:N.bg,color:N.text},children:[N.icon&&`${N.icon} `,m.status]})}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#9ca3af",fontSize:"11px"},children:m.age}),e.jsx("td",{style:{padding:"8px 12px",color:"#4b5563",fontSize:"11px"},children:m.source})]},m.id)})})]})}),e.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#f9fafb",borderTop:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"12px",color:"#6b7280"},children:[e.jsxs("span",{children:["Showing ",(a-1)*h+1,"–",Math.min(a*h,o.length)," of ",o.length]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{disabled:a===1,onClick:()=>S(a-1),style:{padding:"4px 8px",backgroundColor:a===1?"#f3f4f6":"#fff",color:a===1?"#d1d5db":"#4b5563",border:"1px solid #d1d5db",borderRadius:"4px",cursor:a===1?"not-allowed":"pointer",fontWeight:"600",fontSize:"11px"},children:"← Prev"}),e.jsxs("span",{style:{padding:"4px 8px"},children:["Page ",a," of ",_]}),e.jsx("button",{disabled:a===_,onClick:()=>S(a+1),style:{padding:"4px 8px",backgroundColor:a===_?"#f3f4f6":"#fff",color:a===_?"#d1d5db":"#4b5563",border:"1px solid #d1d5db",borderRadius:"4px",cursor:a===_?"not-allowed":"pointer",fontWeight:"600",fontSize:"11px"},children:"Next →"})]})]})]})}function J({label:o,width:b,sortKey:n,sortBy:d,sortDir:c,onSort:y,textAlign:f="left"}){const a=d===n;return e.jsxs("th",{onClick:()=>y(n),style:{padding:"8px 12px",textAlign:f,fontWeight:"700",color:"#4b5563",fontSize:"10px",textTransform:"uppercase",cursor:"pointer",userSelect:"none",backgroundColor:a?"#f0f9ff":"transparent",width:b,transition:"background-color 0.15s"},onMouseEnter:h=>{a||(h.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:h=>{a||(h.currentTarget.style.backgroundColor="transparent")},children:[o," ",a&&(c==="asc"?"↑":"↓")]})}function tt({confirmation:o,onMatch:b,onOverride:n,onUpdateStatus:d,onIgnore:c}){const[y,f]=i.useState(!1),[a,h]=i.useState(!1),[S,p]=i.useState(""),[z,_]=i.useState(""),[m,F]=i.useState("");if(!o)return e.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"6px",border:"1px solid #e5e7eb",padding:"16px",textAlign:"center",color:"#9ca3af",position:"sticky",top:"24px"},children:e.jsx("p",{style:{margin:0,fontSize:"12px"},children:"Select an order to view details"})});const E=(o.mismatches||[]).length>0;return e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"6px",border:"1px solid #e5e7eb",padding:"16px",position:"sticky",top:"24px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:[e.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"13px",fontWeight:"700",color:"#1f2933"},children:"Trade Details"}),e.jsxs("div",{style:{fontSize:"11px"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#9ca3af",fontWeight:"600"},children:"ID:"}),e.jsx("span",{style:{color:"#1f2933",fontFamily:"monospace",marginLeft:"6px"},children:o.tradeId})]}),e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#9ca3af",fontWeight:"600"},children:"External Ref:"}),e.jsx("span",{style:{color:"#1f2933",fontFamily:"monospace",marginLeft:"6px"},children:o.externalRef})]}),e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#9ca3af",fontWeight:"600"},children:"Trader:"}),e.jsx("span",{style:{color:"#1f2933",marginLeft:"6px"},children:o.trader})]})]})]}),e.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"12px",fontWeight:"700",color:"#1f2933"},children:"Internal vs External"}),e.jsx("div",{style:{fontSize:"10px"},children:[{field:"Instrument",internal:o.instrument,external:o.instrument},{field:"Side",internal:o.side,external:o.side},{field:"Quantity",internal:o.quantity,external:o.quantity},{field:"Price",internal:o.price.toFixed(2),external:o.price.toFixed(2)}].map((u,R)=>{var A;const v=(A=o.mismatches)==null?void 0:A.some(l=>l.field===u.field);return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"60px 1fr 1fr",gap:"8px",padding:"6px",borderRadius:"3px",backgroundColor:v?"#fee2e2":"#f9fafb",marginBottom:"4px",borderLeft:v?"2px solid #ef4444":"2px solid transparent"},children:[e.jsx("span",{style:{fontWeight:"600",color:"#4b5563"},children:u.field}),e.jsx("span",{style:{color:"#1f2933"},children:u.internal}),e.jsxs("span",{style:{color:v?"#ef4444":"#1f2933",fontWeight:v?"600":"400"},children:[u.external," ",v&&"✗"]})]},R)})})]}),e.jsxs("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontSize:"12px",fontWeight:"700",color:"#1f2933"},children:"Status History"}),e.jsx("div",{style:{fontSize:"10px"},children:[{time:"09:47",action:"Imported from exchange",actor:"Bloomberg"},{time:"09:46",action:"Created in internal system",actor:"TRADER1"}].map((u,R)=>e.jsxs("div",{style:{marginBottom:"6px",color:"#6b7280"},children:[e.jsxs("div",{style:{fontWeight:"600"},children:[u.time," - ",u.action]}),e.jsx("div",{style:{fontSize:"9px",color:"#9ca3af"},children:u.actor})]},R))})]}),e.jsxs("div",{style:{display:"grid",gap:"6px"},children:[o.status==="Unmatched"&&e.jsx("button",{onClick:b,style:{padding:"8px 12px",backgroundColor:"#10b981",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:K},children:"✓ Match"}),E&&e.jsx("button",{onClick:()=>f(!0),style:{padding:"8px 12px",backgroundColor:"#fef3c7",color:"#92400e",border:"1px solid #fde68a",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:K},children:"⚠ Override"}),e.jsx("button",{onClick:()=>h(!0),style:{padding:"8px 12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:K},children:"↻ Update Status"}),e.jsx("button",{onClick:c,style:{padding:"8px 12px",backgroundColor:"#fff",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:K},children:"Dismiss"})]}),y&&e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",padding:"20px",borderRadius:"6px",border:"1px solid #e5e7eb",boxShadow:"0 20px 25px rgba(0,0,0,0.1)",zIndex:1e3,minWidth:"400px"},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"700"},children:"Override Match"}),e.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:"0 0 12px 0"},children:"Provide a reason for overriding system matching rules:"}),e.jsx("textarea",{value:S,onChange:u=>p(u.target.value),placeholder:"Enter reason...",style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",minHeight:"60px",boxSizing:"border-box",fontFamily:K}}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[e.jsx("button",{onClick:()=>{n(S),f(!1),p("")},style:{flex:1,padding:"8px 12px",backgroundColor:"#10b981",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:K},children:"Confirm Override"}),e.jsx("button",{onClick:()=>f(!1),style:{flex:1,padding:"8px 12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:K},children:"Cancel"})]})]}),a&&e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",padding:"20px",borderRadius:"6px",border:"1px solid #e5e7eb",boxShadow:"0 20px 25px rgba(0,0,0,0.1)",zIndex:1e3,minWidth:"400px"},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"700"},children:"Update Status"}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:"#4b5563",textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"New Status"}),e.jsxs("select",{value:m,onChange:u=>F(u.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",boxSizing:"border-box",fontFamily:K},children:[e.jsx("option",{value:"",children:"Select status..."}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Error Resolved",children:"Error Resolved"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"}),e.jsx("option",{value:"In Progress",children:"In Progress"})]})]}),e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"600",color:"#4b5563",textTransform:"uppercase",display:"block",marginBottom:"4px"},children:"Reason (Required)"}),e.jsx("textarea",{value:z,onChange:u=>_(u.target.value),placeholder:"Explain the status change...",style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",minHeight:"60px",boxSizing:"border-box",fontFamily:K}})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>{m&&z&&(d(m,z),h(!1),F(""),_(""))},disabled:!m||!z,style:{flex:1,padding:"8px 12px",backgroundColor:m&&z?"#1d4ed8":"#ccc",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"600",cursor:m&&z?"pointer":"not-allowed",fontSize:"12px",fontFamily:K},children:"Update"}),e.jsx("button",{onClick:()=>h(!1),style:{flex:1,padding:"8px 12px",backgroundColor:"#f3f4f6",color:"#6b7280",border:"1px solid #d1d5db",borderRadius:"4px",fontWeight:"600",cursor:"pointer",fontSize:"12px",fontFamily:K},children:"Cancel"})]})]})]})}function rt(){const o=["Matched","Unmatched","One-sided","Pending","Error","In Progress"],b=["ES","NQ","AAPL","GOOGL","BZ"],n=["TRADER1","TRADER2","TRADER3"],d=["JPM","GS","BNY","CITI"],c=["Bloomberg","FIX","Email","Swift"];return Array.from({length:45},(y,f)=>{const a=b[Math.floor(Math.random()*b.length)],h=o[Math.floor(Math.random()*o.length)],S=h!=="Matched"&&Math.random()>.5,p=Number((Math.random()*1e4+3e3).toFixed(2));return{id:`TR${String(f+1).padStart(3,"0")}`,tradeId:`TR-20251213-${String(f+1).padStart(3,"0")}`,externalRef:`CR-${String(f+1).padStart(3,"0")}`,instrument:a,side:Math.random()>.5?"BUY":"SELL",quantity:Math.floor(Math.random()*500)+10,price:p,trader:n[Math.floor(Math.random()*n.length)],counterparty:d[Math.floor(Math.random()*d.length)],status:h,age:`${Math.floor(Math.random()*24)}h ${Math.floor(Math.random()*60)}m`,source:c[Math.floor(Math.random()*c.length)],mismatches:S?[{field:"Quantity",severity:"critical"}]:[],createdAt:new Date(Date.now()-Math.random()*864e5).toISOString()}})}const q="",ot=()=>{const[o,b]=i.useState("roles"),[n,d]=i.useState([]),[c,y]=i.useState([]),[f,a]=i.useState([]),[h,S]=i.useState([]),[p,z]=i.useState([]),[_,m]=i.useState([]),[F,N]=i.useState(!1),[E,u]=i.useState(""),[R,v]=i.useState(""),[A,l]=i.useState({role_name:"",description:""}),[r,j]=i.useState({permission_name:"",description:""}),[M,w]=i.useState({module_name:"",description:""}),[T,D]=i.useState({role_id:"",module_id:"",permission_id:""}),[P,U]=i.useState({user_id:"",role_id:""}),[V,re]=i.useState(null),[Z,oe]=i.useState([]);i.useEffect(()=>{ne()},[o]);const ne=async()=>{N(!0),u("");try{const[s,g,O,Y,le,ce]=await Promise.all([fetch(`${q}/api/v1/security/roles`),fetch(`${q}/api/v1/security/permissions`),fetch(`${q}/api/v1/security/modules`),fetch(`${q}/api/v1/security/role-permissions`),fetch(`${q}/api/v1/static-data/traders`),fetch(`${q}/api/v1/security/user-roles`)]);if(!s.ok)throw new Error("Failed to fetch roles");if(!g.ok)throw new Error("Failed to fetch permissions");if(!O.ok)throw new Error("Failed to fetch modules");if(!Y.ok)throw new Error("Failed to fetch role-permission mappings");if(!le.ok)throw new Error("Failed to fetch traders");if(!ce.ok)throw new Error("Failed to fetch user roles");const me=await s.json(),fe=await g.json(),ye=await O.json(),he=await Y.json(),je=await le.json(),ge=await ce.json();d(me),y(fe),a(ye),S(he),z(je),m(ge)}catch(s){u(s.message||"Failed to fetch data")}finally{N(!1)}},se=async s=>{if(s.preventDefault(),!A.role_name){u("Role name is required");return}try{const g=await fetch(`${q}/api/v1/security/roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!g.ok){const Y=await g.json();throw new Error(Y.detail||"Failed to create role")}const O=await g.json();d([...n,O]),l({role_name:"",description:""}),v("Role created successfully"),setTimeout(()=>v(""),3e3)}catch(g){u(g.message)}},ee=async s=>{if(s.preventDefault(),!r.permission_name){u("Permission name is required");return}try{const g=await fetch(`${q}/api/v1/security/permissions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!g.ok){const Y=await g.json();throw new Error(Y.detail||"Failed to create permission")}const O=await g.json();y([...c,O]),j({permission_name:"",description:""}),v("Permission created successfully"),setTimeout(()=>v(""),3e3)}catch(g){u(g.message)}},G=async s=>{if(s.preventDefault(),!M.module_name){u("Module name is required");return}try{const g=await fetch(`${q}/api/v1/security/modules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!g.ok){const Y=await g.json();throw new Error(Y.detail||"Failed to create module")}const O=await g.json();a([...f,O]),w({module_name:"",description:""}),v("Module created successfully"),setTimeout(()=>v(""),3e3)}catch(g){u(g.message)}},x=async s=>{if(s.preventDefault(),!T.role_id||!T.module_id||!T.permission_id){u("All fields are required");return}try{const g=await fetch(`${q}/api/v1/security/role-permissions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!g.ok){const Y=await g.json();throw new Error(Y.detail||"Failed to create mapping")}const O=await g.json();S([...h,O]),D({role_id:"",module_id:"",permission_id:""}),v("Role-Permission mapping created successfully"),setTimeout(()=>v(""),3e3)}catch(g){u(g.message)}},C=async s=>{if(s.preventDefault(),!P.user_id||!P.role_id){u("Both user and role are required");return}try{const g=await fetch(`${q}/api/v1/security/user-roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!g.ok){const Y=await g.json();throw new Error(Y.detail||"Failed to assign role")}const O=await g.json();m([..._,O]),U({user_id:"",role_id:""}),v("Role assigned to user successfully"),setTimeout(()=>v(""),3e3)}catch(g){u(g.message)}},k=async s=>{if(window.confirm("Are you sure you want to delete this role?"))try{if(!(await fetch(`${q}/api/v1/security/roles/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete role");d(n.filter(O=>O.role_id!==s)),v("Role deleted successfully"),setTimeout(()=>v(""),3e3)}catch(g){u(g.message)}},W=async s=>{if(window.confirm("Are you sure you want to remove this role from the user?"))try{if(!(await fetch(`${q}/api/v1/security/user-roles/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete user role");m(_.filter(O=>O.user_role_id!==s)),v("User role removed successfully"),setTimeout(()=>v(""),3e3)}catch(g){u(g.message)}},H=async s=>{re(s);try{const g=await fetch(`${q}/api/v1/security/user-roles/${s}`);if(g.ok){const O=await g.json();oe(O)}}catch{u("Failed to fetch user permissions")}},Q=s=>{const g=n.find(O=>O.role_id===s);return g?g.role_name:s},de=s=>{const g=p.find(O=>O.trader_id===s);return g?g.name:s};return e.jsxs("div",{className:"security-module",children:[e.jsxs("div",{className:"security-header",children:[e.jsx("h1",{children:"Security & Access Control"}),e.jsx("p",{children:"Manage roles, permissions, and user access"})]}),E&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx("span",{children:E}),e.jsx("button",{onClick:()=>u(""),children:"×"})]}),R&&e.jsxs("div",{className:"alert alert-success",children:[e.jsx("span",{children:R}),e.jsx("button",{onClick:()=>v(""),children:"×"})]}),e.jsx("div",{className:"tabs-container",children:e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab ${o==="roles"?"active":""}`,onClick:()=>b("roles"),children:"Roles"}),e.jsx("button",{className:`tab ${o==="permissions"?"active":""}`,onClick:()=>b("permissions"),children:"Permissions"}),e.jsx("button",{className:`tab ${o==="modules"?"active":""}`,onClick:()=>b("modules"),children:"Modules"}),e.jsx("button",{className:`tab ${o==="mappings"?"active":""}`,onClick:()=>b("mappings"),children:"Role-Permission Mappings"}),e.jsx("button",{className:`tab ${o==="user-roles"?"active":""}`,onClick:()=>b("user-roles"),children:"User Roles"})]})}),F&&e.jsx("div",{className:"loading",children:"Loading..."}),o==="roles"&&!F&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Create New Role"}),e.jsxs("form",{onSubmit:se,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Role Name"}),e.jsx("input",{type:"text",placeholder:"e.g., FO_USER, BO_USER, SUPPORT",value:A.role_name,onChange:s=>l({...A,role_name:s.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{placeholder:"Role description",value:A.description,onChange:s=>l({...A,description:s.target.value}),rows:"3"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create Role"})]})]}),e.jsxs("div",{className:"list-section",children:[e.jsx("h2",{children:"Roles"}),n.length===0?e.jsx("p",{className:"empty-state",children:"No roles found"}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Role Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:n.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"role-name",children:s.role_name}),e.jsx("td",{children:s.description||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${s.status.toLowerCase()}`,children:s.status})}),e.jsx("td",{children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-small btn-danger",onClick:()=>k(s.role_id),children:"Delete"})})]},s.role_id))})]})]})]}),o==="permissions"&&!F&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Create New Permission"}),e.jsxs("form",{onSubmit:ee,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Permission Name"}),e.jsx("input",{type:"text",placeholder:"e.g., READ, READ_WRITE",value:r.permission_name,onChange:s=>j({...r,permission_name:s.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{placeholder:"Permission description",value:r.description,onChange:s=>j({...r,description:s.target.value}),rows:"3"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create Permission"})]})]}),e.jsxs("div",{className:"list-section",children:[e.jsx("h2",{children:"Permissions"}),c.length===0?e.jsx("p",{className:"empty-state",children:"No permissions found"}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Permission Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created"})]})}),e.jsx("tbody",{children:c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"permission-name",children:s.permission_name}),e.jsx("td",{children:s.description||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${s.status.toLowerCase()}`,children:s.status})}),e.jsx("td",{children:new Date(s.created_at).toLocaleDateString()})]},s.permission_id))})]})]})]}),o==="modules"&&!F&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Create New Module"}),e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Module Name"}),e.jsx("input",{type:"text",placeholder:"e.g., OrderEntry, StaticData, MarketData",value:M.module_name,onChange:s=>w({...M,module_name:s.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{placeholder:"Module description",value:M.description,onChange:s=>w({...M,description:s.target.value}),rows:"3"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create Module"})]})]}),e.jsxs("div",{className:"list-section",children:[e.jsx("h2",{children:"Modules"}),f.length===0?e.jsx("p",{className:"empty-state",children:"No modules found"}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Module Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created"})]})}),e.jsx("tbody",{children:f.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"module-name",children:s.module_name}),e.jsx("td",{children:s.description||"-"}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${s.status.toLowerCase()}`,children:s.status})}),e.jsx("td",{children:new Date(s.created_at).toLocaleDateString()})]},s.module_id))})]})]})]}),o==="mappings"&&!F&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Create Role-Permission Mapping"}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Role"}),e.jsxs("select",{value:T.role_id,onChange:s=>D({...T,role_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Select Role"}),n.map(s=>e.jsx("option",{value:s.role_id,children:s.role_name},s.role_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Module"}),e.jsxs("select",{value:T.module_id,onChange:s=>D({...T,module_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Select Module"}),f.map(s=>e.jsx("option",{value:s.module_id,children:s.module_name},s.module_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Permission"}),e.jsxs("select",{value:T.permission_id,onChange:s=>D({...T,permission_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Select Permission"}),c.map(s=>e.jsx("option",{value:s.permission_id,children:s.permission_name},s.permission_id))]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create Mapping"})]})]}),e.jsxs("div",{className:"list-section",children:[e.jsx("h2",{children:"Role-Permission Mappings"}),h.length===0?e.jsx("p",{className:"empty-state",children:"No mappings found"}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Module"}),e.jsx("th",{children:"Permission"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:h.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.role_name}),e.jsx("td",{children:s.module_name}),e.jsx("td",{children:e.jsx("span",{className:"permission-badge",children:s.permission_name})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${s.status.toLowerCase()}`,children:s.status})})]},s.mapping_id))})]})]})]}),o==="user-roles"&&!F&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{children:"Assign Role to User"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"User (Trader)"}),e.jsxs("select",{value:P.user_id,onChange:s=>U({...P,user_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Select User"}),p.map(s=>e.jsxs("option",{value:s.trader_id,children:[s.name," (",s.user_id,")"]},s.trader_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Role"}),e.jsxs("select",{value:P.role_id,onChange:s=>U({...P,role_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Select Role"}),n.map(s=>e.jsx("option",{value:s.role_id,children:s.role_name},s.role_id))]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Assign Role"})]})]}),e.jsxs("div",{className:"list-section",children:[e.jsx("h2",{children:"User Role Assignments"}),_.length===0?e.jsx("p",{className:"empty-state",children:"No user role assignments found"}):e.jsxs("table",{className:"data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"User"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Assigned At"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:_.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"user-name",children:de(s.user_id)}),e.jsx("td",{className:"role-name",children:Q(s.role_id)}),e.jsx("td",{children:new Date(s.assigned_at).toLocaleString()}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${s.status.toLowerCase()}`,children:s.status})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-small btn-danger",onClick:()=>W(s.user_role_id),children:"Remove"})})]},s.user_role_id))})]})]}),e.jsxs("div",{className:"list-section",children:[e.jsx("h2",{children:"User Permission Summary"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Select User to View Permissions"}),e.jsxs("select",{onChange:s=>H(s.target.value),children:[e.jsx("option",{value:"",children:"Select a user..."}),p.map(s=>e.jsx("option",{value:s.trader_id,children:s.name},s.trader_id))]})]}),V&&Z.length>0&&e.jsxs("div",{className:"user-permissions-summary",children:[e.jsxs("h3",{children:[de(V)," Permissions"]}),Z.map(s=>e.jsxs("div",{className:"role-section",children:[e.jsxs("h4",{children:["Role: ",s.role_name]}),e.jsxs("table",{className:"permissions-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Module"}),e.jsx("th",{children:"Permission"})]})}),e.jsx("tbody",{children:s.permissions.map((g,O)=>e.jsxs("tr",{children:[e.jsx("td",{children:g.module_name}),e.jsx("td",{children:e.jsx("span",{className:`permission-badge ${g.permission_name.toLowerCase()}`,children:g.permission_name})})]},O))})]})]},`${s.role_id}`))]}),V&&Z.length===0&&e.jsx("p",{className:"empty-state",children:"No permissions assigned to this user"})]})]})]})};const st="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif";class it extends Xe.Component{constructor(b){super(b),this.state={hasError:!1,error:null}}static getDerivedStateFromError(b){return{hasError:!0,error:b}}componentDidCatch(b,n){}render(){return this.state.hasError?e.jsxs("div",{style:{padding:24,background:"#fff3f2",border:"1px solid #fecaca",borderRadius:6},children:[e.jsx("h3",{style:{margin:0,color:"#7f1d1d"},children:"Module failed to render"}),e.jsx("div",{style:{marginTop:8,color:"#7f1d1d",fontSize:13},children:this.state.error&&this.state.error.toString()}),e.jsx("div",{style:{marginTop:12},children:e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),style:{padding:"8px 12px",borderRadius:4,border:"1px solid #d1d5db",background:"#fff"},children:"Dismiss"})})]}):this.props.children}}function dt(){var h,S;const[o,b]=i.useState("orders"),[n,d]=i.useState(null),[c,y]=i.useState(null),f=()=>{switch(o){case"orders":return e.jsx(He,{onSelectOrder:(p,z)=>{d(p),y(z)}});case"static":return e.jsx(Ye,{});case"market":return e.jsx(Ke,{});case"enrichment":return e.jsx(qe,{});case"trades":return e.jsx(Qe,{});case"confirmations":return e.jsx(Je,{});case"security":return e.jsx(ot,{});default:return e.jsx("div",{style:{padding:20},children:"Module not available"})}},a=[{id:"orders",label:"Order Entry"},{id:"confirmations",label:"Confirmations"},{id:"static",label:"Static Data"},{id:"market",label:"Market Data"},{id:"enrichment",label:"Enrichment"},{id:"trades",label:"Trade Module"},{id:"security",label:"Security"}];return e.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"#f3f4f6",fontFamily:st},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"56px",backgroundColor:"#fff",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",paddingLeft:"240px",zIndex:100,boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"6px",background:"linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"16px"},children:"M"}),e.jsx("div",{children:e.jsx("h1",{style:{margin:0,fontSize:"15px",fontWeight:"700",color:"#1f2933",letterSpacing:"-0.3px"},children:"MockTrade"})}),e.jsx("div",{style:{marginLeft:"12px",paddingLeft:"12px",borderLeft:"1px solid #e5e7eb",fontSize:"12px",fontWeight:"600",color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Trading Terminal"}),e.jsxs("div",{style:{marginLeft:20,fontSize:12,color:"#6b7280"},children:["Active: ",e.jsx("strong",{children:(h=a.find(p=>p.id===o))==null?void 0:h.label})]})]})}),e.jsxs("div",{style:{position:"fixed",left:0,top:0,width:"240px",height:"100vh",backgroundColor:"#fff",borderRight:"1px solid #e5e7eb",paddingTop:"64px",paddingBottom:"20px",overflowY:"auto",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{flex:1,padding:"0 12px"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"700",color:"#9ca3af",textTransform:"uppercase",letterSpacing:"0.5px",margin:"0 0 8px 12px",paddingLeft:"0"},children:"Modules"}),e.jsx("nav",{style:{display:"flex",flexDirection:"column",gap:"3px"},children:a.map(p=>e.jsxs("button",{onClick:()=>b(p.id),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"10px 12px",backgroundColor:o===p.id?"#f0f9ff":"transparent",color:o===p.id?"#1d4ed8":"#4b5563",border:o===p.id?"1px solid #bfdbfe":"1px solid transparent",borderRadius:"6px",cursor:"pointer",fontWeight:o===p.id?"600":"500",fontSize:"13px",transition:"all 0.15s ease",textAlign:"left",fontFamily:"inherit"},onMouseEnter:z=>{o!==p.id&&(z.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:z=>{o!==p.id&&(z.currentTarget.style.backgroundColor="transparent")},children:[e.jsx("span",{children:p.label}),o===p.id&&e.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#1d4ed8"}})]},p.id))})]}),e.jsxs("div",{style:{margin:"0 12px",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"6px",fontSize:"10px",color:"#4b5563",lineHeight:"1.5",border:"1px solid #e5e7eb"},children:[e.jsx("p",{style:{margin:"0 0 4px 0",fontWeight:"600",color:"#1f2933"},children:"API Docs"}),e.jsx("p",{style:{margin:0},children:e.jsx("a",{href:"/docs",target:"_blank",rel:"noopener noreferrer",style:{color:"#1d4ed8",textDecoration:"none",fontWeight:"500"},children:"API Docs"})})]})]}),e.jsx("div",{style:{marginLeft:"240px",marginTop:"56px",flex:1,overflow:"auto",padding:"24px",display:"flex",justifyContent:"center",backgroundColor:"#f3f4f6"},children:e.jsxs("div",{style:{width:"100%",maxWidth:"1400px",display:"grid",gridTemplateColumns:o==="orders"?"1fr 320px":"1fr",gap:"20px"},children:[e.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"6px",padding:"16px",overflow:"hidden"},children:e.jsx(it,{children:f()})}),o==="orders"&&e.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"6px",border:"1px solid #e5e7eb",padding:"16px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",height:"fit-content",position:"sticky",top:"24px"},children:c?e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"13px",fontWeight:"700",color:"#1f2933",paddingBottom:"8px",borderBottom:"1px solid #e5e7eb"},children:"Order Details"}),e.jsxs("div",{style:{display:"grid",gap:"10px",fontSize:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"ID"}),e.jsxs("div",{style:{color:"#1f2933",fontFamily:"monospace",fontSize:"11px",marginTop:"2px"},children:[(S=c.id)==null?void 0:S.substring(0,12),"..."]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Instrument"}),e.jsx("div",{style:{color:"#1f2933",fontWeight:"600",marginTop:"2px"},children:c.instrument})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Side"}),e.jsx("div",{style:{color:c.side==="BUY"?"#10b981":"#ef4444",fontWeight:"600",marginTop:"2px"},children:c.side})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Qty"}),e.jsx("div",{style:{color:"#1f2933",fontWeight:"600",marginTop:"2px"},children:c.qty})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Price"}),e.jsx("div",{style:{color:"#1f2933",fontWeight:"600",marginTop:"2px"},children:c.price||"—"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Type"}),e.jsx("div",{style:{color:"#1f2933",fontSize:"11px",marginTop:"2px"},children:c.type})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"TIF"}),e.jsx("div",{style:{color:"#1f2933",fontSize:"11px",marginTop:"2px"},children:c.tif})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Trader"}),e.jsx("div",{style:{color:"#1f2933",fontSize:"11px",marginTop:"2px"},children:c.trader})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Status"}),e.jsx("div",{style:{marginTop:"2px"},children:e.jsx("span",{style:{display:"inline-block",padding:"3px 8px",borderRadius:"3px",fontSize:"10px",fontWeight:"700",backgroundColor:c.status==="NEW"?"#fef3c7":"#d1fae5",color:c.status==="NEW"?"#78350f":"#065f46",border:`1px solid ${c.status==="NEW"?"#fde68a":"#a7f3d0"}`},children:c.status})})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#9ca3af",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Created"}),e.jsx("div",{style:{color:"#1f2933",fontSize:"11px",marginTop:"2px"},children:c.created_at?new Date(c.created_at).toLocaleString():"—"})]})]})]}):e.jsxs("div",{style:{textAlign:"center",padding:"20px 0",color:"#9ca3af"},children:[e.jsx("p",{style:{margin:0,fontSize:"12px"},children:"Select an order"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"11px",color:"#d1d5db"},children:"to view details"})]})})]})})]})}export{dt as default};
